<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-11-13 Tue 11:50 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>git note</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" href="css/worg.css" type="text/css" media="screen" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<a href="index.html">Home</a>
</div>
<div id="content">
<h1 class="title">git note</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org2256211">git 独奏</a>
<ul>
<li><a href="#org2582935">git 初始化</a></li>
<li><a href="#orgc7df7ae">git 暂存区</a></li>
<li><a href="#org327e3c5">git reset 重置</a></li>
<li><a href="#orgc497527">git 检出</a></li>
<li><a href="#orgba7f433">git 恢复进度</a></li>
<li><a href="#orgc691baa">git 基础操作</a></li>
<li><a href="#org5c00dce">git tools</a></li>
<li><a href="#org91fcf56">改变历史</a></li>
<li><a href="#org18d8ebd">git克隆</a></li>
</ul>
</li>
<li><a href="#orgac71d48">git 和声</a>
<ul>
<li><a href="#org221ae5c">git 工作协调</a></li>
<li><a href="#orgdec391c">git 冲突解决</a></li>
</ul>
</li>
<li><a href="#org5ef84a1">common questions</a>
<ul>
<li><a href="#org6584a14">git ls-files 乱码问题</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
蒋鑫. Git权威指南 机械工业出版社. Kindle 版本. 
</p>
<div id="outline-container-org2256211" class="outline-2">
<h2 id="org2256211">git 独奏</h2>
<div class="outline-text-2" id="text-org2256211">
</div>
<div id="outline-container-org2582935" class="outline-3">
<h3 id="org2582935">git 初始化</h3>
<div class="outline-text-3" id="text-org2582935">
<ul class="org-ul">
<li><p>
git init 
</p>

<p>
初始化git项目
</p></li>
<li><p>
.git
</p>

<p>
版本库存放目录
</p></li>
<li>git config
修改配置文件
<ul class="org-ul">
<li><p>
git config -e 
</p>

<p>
修改 <code>.git/config</code>
</p></li>
<li><p>
git config -e &#x2013;global
</p>

<p>
修改 <code>~/.gitconfig</code>
</p></li>
<li><p>
git config -e &#x2013;system
</p>

<p>
修改 <code>/etc/gitconfig</code>
</p></li>
<li><p>
git config &lt;session&gt;.&lt;key&gt;
</p>

<p>
读写配置文件的属性
<code>$GIT_CONF=test.ini git config a.b</code> 来处理其他配置文件
</p></li>
<li>git config &#x2013;global alias.ci "commit -s"
设置别名</li>
</ul></li>
<li>git clone note  note-bak
备份项目</li>
</ul>
</div>
</div>
<div id="outline-container-orgc7df7ae" class="outline-3">
<h3 id="orgc7df7ae">git 暂存区</h3>
<div class="outline-text-3" id="text-orgc7df7ae">

<div class="figure">
<p><img src="http://7xpyfe.com1.z0.glb.clouddn.com/2017101515080826245091.png" alt="2017101515080826245091.png" />
</p>
</div>

<p>
工作区、暂存区、版本库
</p>
<ul class="org-ul">
<li>git status -s</li>
<li>git log &#x2013;pretty=oneline</li>
<li><p>
git add note-git.org 
</p>

<p>
添加到暂存区
</p></li>
<li><p>
git checkout &#x2013; note-git.org
</p>

<p>
暂存区&#x2013;&gt;工作区
</p></li>
<li><p>
git diff 
</p>


<div class="figure">
<p><img src="http://7xpyfe.com1.z0.glb.clouddn.com/20171015150808301278029.png" alt="20171015150808301278029.png" /> 
</p>
</div>

<p>
diff介绍 
</p>

<p>
diff 比较工作区、暂存区、版本库代码
</p>

<p>
git diff 比较工作区和暂存区
</p>

<p>
git diff &#x2013;cached 比较暂存区和HEAD
</p>

<p>
git diff HEAD 比较工作区和HEAD
</p>

<p>
git diff &lt;commit1&gt;&lt;commit2&gt; &#x2013; &lt;paths&gt;  比较不同版本文件的差异
</p></li>
<li><p>
git stash
</p>

<p>
保存进度，暂存状态
</p></li>
</ul>
</div>
</div>
<div id="outline-container-org327e3c5" class="outline-3">
<h3 id="org327e3c5">git reset 重置</h3>
<div class="outline-text-3" id="text-org327e3c5">
<ol class="org-ol">
<li>git reset HEAD&lt;path&gt;  相当于取消 git add &lt;paths&gt; 操作</li>

<li><p>
git reset &#x2013;hard master@{2}  重置master所有位置为两次改变之前的值
</p>

<p>
&#x2013;soft       只改变引用的指向，不改变暂存区和工作区
</p>

<p>
&#x2013;mixed      更改引用的指向，重置暂存区，不改变工作区
</p></li>

<li>git reset &#x2013;soft HEAD^ 放弃最新的提交</li>
<li>git reset HEAD filename</li>
</ol>
</div>
</div>

<div id="outline-container-orgc497527" class="outline-3">
<h3 id="orgc497527">git 检出</h3>
<div class="outline-text-3" id="text-orgc497527">
<ul class="org-ul">
<li><p>
git checkout branch_name
</p>

<p>
git branch -v
</p></li>
<li>git checkout&#x2013;filename  用暂存区的文件覆盖工作区的 取消上次add</li>
</ul>
</div>
</div>
<div id="outline-container-orgba7f433" class="outline-3">
<h3 id="orgba7f433">git 恢复进度</h3>
<div class="outline-text-3" id="text-orgba7f433">
<ul class="org-ul">
<li><p>
git stash
</p>

<p>
git stash list
</p>

<p>
git stash pop 从最近保持的进度恢复
</p>

<p>
git stash drop 默认删除最新的进度
</p>

<p>
git stash clear 删除所有进度
</p>

<p>
git stash branch &lt;branchname&gt;  基于进度创建分支
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orgc691baa" class="outline-3">
<h3 id="orgc691baa">git 基础操作</h3>
<div class="outline-text-3" id="text-orgc691baa">
<ul class="org-ul">
<li><p>
删除文件
</p>

<p>
git ls-files 查看暂存区文件
</p>

<p>
git rm filename 删除暂存区文件
</p>

<p>
git reset &#x2013;hard HEAD^ 重置上次提交的删除操作
</p>

<p>
git add-u 快速标记操作,下次提交会生效
</p></li>
<li><p>
恢复文件
</p>

<p>
git show HEAD~1:circl.html &gt; circl.html
</p>

<p>
git checkout HEAD~1 &#x2013; circl.html
</p></li>
<li><p>
移动文件
</p>

<p>
git mv a b
</p></li>
<li><p>
选择性添加
</p>

<p>
git add -i 交互窗口
</p></li>
<li><p>
文件忽略
</p>

<p>
在工作目录下添加.gitignore
</p>

<p>
<code>*.pyc</code>
</p>

<p>
git status &#x2013;ignored -s 可以查看哪些文件被忽略了
</p>

<p>
git add -f filename 或略的文件强制更新
</p>

<p>
git commit -a -m  "偷懒了 直接提交 不用 git add"
</p></li>
<li><p>
文件归档
</p>

<p>
git archive -o lastest.zip HEAD  最新归档
</p>

<p>
git archive -o partial.tar HEAD src doc  只归档两个文件夹
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org5c00dce" class="outline-3">
<h3 id="org5c00dce">git tools</h3>
<div class="outline-text-3" id="text-org5c00dce">
<p>
版本库浏览器能更好看提交关系图
</p>
<ol class="org-ol">
<li>gitk</li>
<li>gitg</li>
<li>qgit</li>
<li>命令行
<ul class="org-ul">
<li><p>
git log 
</p>

<p>
git config &#x2013;global alias.glog "log &#x2013;graph"  使用:git glog &#x2013;oneline
</p></li>
<li><p>
文件追溯
</p>

<p>
git blame filename 逐行显示谁编辑的 追踪bug!
</p></li>
<li><p>
二分查找
</p>

<p>
找到一个好版本和坏版本,在中间版本的master上执行
</p>

<p>
git bisect start
</p></li>
</ul></li>
</ol>
</div>
</div>

<div id="outline-container-org91fcf56" class="outline-3">
<h3 id="org91fcf56">改变历史</h3>
<div class="outline-text-3" id="text-org91fcf56">
<ul class="org-ul">
<li><p>
单步悔棋
</p>

<p>
git commit &#x2013;amend  修改commit原因
</p>

<p>
git checkout HEAD^ &#x2013;filepath 还原删除的文件到暂存区
</p></li>
<li><p>
多步悔棋
git reset &#x2013;soft HEAD^^ 后退两个版本到暂存区
</p>

<p>
git commit -m "new reason "
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org18d8ebd" class="outline-3">
<h3 id="org18d8ebd">git克隆</h3>
<div class="outline-text-3" id="text-org18d8ebd">
<ul class="org-ul">
<li><p>
git clone
</p>

<p>
git clone &lt;rep&gt; dir
</p>

<p>
git clone &#x2013;bare &lt;rep&gt; dir
</p>

<p>
git clone &#x2013;mirror &lt;rep&gt; dir
</p></li>
<li>git push</li>
<li>git pull</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgac71d48" class="outline-2">
<h2 id="orgac71d48">git 和声</h2>
<div class="outline-text-2" id="text-orgac71d48">
</div>
<div id="outline-container-org221ae5c" class="outline-3">
<h3 id="org221ae5c">git 工作协调</h3>
<div class="outline-text-3" id="text-org221ae5c">
<ul class="org-ul">
<li>支持的协议
智能协议: 数据传输过程中有清晰的进度显示,按需传输，传输量小，速度快 (ssh,git,file//)  
哑协议: 创术速度慢，传输进度不可见，不知道什么时候完成数据传输(ftp,rsync)</li>
<li><p>
强制非快进式推送
</p>

<p>
git rev-list HEAD  本地版本库最新提交
</p>

<p>
git ls-remote origin 远程版本库的引用
</p>

<p>
git push 报non-fast-forward updates were rejected 不可以git push -f 强制更新
</p></li>
<li><p>
合并后推送
</p>

<p>
git pull = git fetch + git merge
</p>

<p>
git log &#x2013;graph &#x2013;oneline
</p>

<p>
git push
</p></li>
</ul>
</div>
</div>


<div id="outline-container-orgdec391c" class="outline-3">
<h3 id="orgdec391c">git 冲突解决</h3>
<div class="outline-text-3" id="text-orgdec391c">
<p>
git merge
</p>

<ol class="org-ol">
<li><p>
自动合并
</p>

<p>
git fetch
</p>

<p>
git merge refs/remotes/origin/master
</p>

<p>
git push
</p>

<p>
git log -1 -m &#x2013;stat  m参数可以查看合并操作
</p></li>
<li>逻辑冲突
<ul class="org-ul">
<li>修改文件名，其他文件引用了原来的文件名</li>
<li>函数修改了返回值,但其他地方调用的还是原来的返回值函数</li>
</ul></li>
<li><p>
冲突解决
</p>
<ul class="org-ul">
<li><p>
&lt;&lt;&lt;&lt;&lt;&lt;&lt;(七个小于号) 和 <code>=====</code> (七个等于号)
</p>

<p>
当前分支所更改的内容
</p></li>
<li><p>
=======(七个等于号) 和 &gt;&gt;&gt;&gt;&gt;&gt;&gt; (七个大于号)
</p>

<p>
所要合并的版本要更改的内容
</p></li>
</ul>

<p>
git add / git reset
</p></li>
<li>树冲突</li>
<li>合并策略
<ul class="org-ul">
<li>resolve</li>
<li>recursive</li>
</ul></li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org5ef84a1" class="outline-2">
<h2 id="org5ef84a1"><a href="http://mazhuang.org/wiki/git/">common questions</a></h2>
<div class="outline-text-2" id="text-org5ef84a1">
</div>
<div id="outline-container-org6584a14" class="outline-3">
<h3 id="org6584a14">git ls-files 乱码问题</h3>
<div class="outline-text-3" id="text-org6584a14">
<p>
在 <code>~/.gitconfig</code> 中添加如下内容
</p>
<pre class="example">
[core]
   quotepath = false
[gui]
   encoding = utf-8
[i18n]
   commitencoding = utf-8
[svn]
   pathnameencoding = utf-8
</pre>
</div>
</div>
</div>
</div>
</body>
</html>