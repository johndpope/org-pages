<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-10-26 Fri 16:33 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>note-linux-centos</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" href="css/worg.css" type="text/css" media="screen" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<a href="index.html">Home</a>
</div>
<div id="content">
<h1 class="title">note-linux-centos</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgf958f5c">VboxManage</a></li>
<li><a href="#org1b3804c">centos7 basic environment</a>
<ul>
<li><a href="#org588fc3a">lvm</a></li>
<li><a href="#org00b129e">ip</a></li>
<li><a href="#org2a3b151">sshd</a></li>
<li><a href="#org2a80c9b">hostname</a></li>
<li><a href="#org3bf8d8e">yum source</a></li>
<li><a href="#org1b5ae82">ntp</a></li>
<li><a href="#org4f3511d">firewallds</a></li>
<li><a href="#org22d07b4">disable selinux</a></li>
<li><a href="#orge03b1b0">java  &amp; scala</a></li>
</ul>
</li>
<li><a href="#org82ec85a">hadoop é›†ç¾¤é…ç½®</a>
<ul>
<li><a href="#org0e6ab07">hadoop hbase spark ç‰ˆæœ¬é€‰æ‹©</a></li>
<li><a href="#orgdca9702">ç¯å¢ƒå‡†å¤‡</a></li>
<li><a href="#orgcb34b40">é…ç½®hadoop cluster</a></li>
<li><a href="#orgac4e050">å¯åŠ¨hadoop</a></li>
</ul>
</li>
<li><a href="#org80ba43b">elasticstk é›†ç¾¤</a>
<ul>
<li><a href="#orge0a52dc">elasticsearch-611</a></li>
<li><a href="#org17dae9c">kibana</a></li>
<li><a href="#orgd785476">logstash</a></li>
<li><a href="#org80afdfc">beats</a></li>
</ul>
</li>
<li><a href="#org3c3a410">hive</a></li>
<li><a href="#orgec8fd94">zookeeper</a>
<ul>
<li><a href="#org558dea5">Replicated ZooKeeper configural</a></li>
</ul>
</li>
<li><a href="#org06a6e74">hbase</a>
<ul>
<li><a href="#orgba681af">hbase configural</a></li>
<li><a href="#org05fdebf">hbase start</a></li>
</ul>
</li>
<li><a href="#orgd915e4c">kafka</a>
<ul>
<li><a href="#orga5d1c11">kafka configural</a></li>
<li><a href="#orgfbc90a1">kafka start service</a></li>
<li><a href="#orgb417a3d">use kafka</a></li>
</ul>
</li>
<li><a href="#org9717966">spark</a>
<ul>
<li><a href="#orgd668a34">spark configural</a></li>
<li><a href="#org25c94ea">spark start</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
#+AUTHOR manue1
#+EXPORT_FILE_NAME centos
</p>

<div id="outline-container-orgf958f5c" class="outline-2">
<h2 id="orgf958f5c">VboxManage</h2>
<div class="outline-text-2" id="text-orgf958f5c">
<ul class="org-ul">
<li><p>
vms åŸºæœ¬ä¿¡æ¯
</p>

<p>
VBoxManage showvminfo Centos701
</p></li>

<li><p>
æ— ç•Œé¢å¯åŠ¨vms
</p>

<p>
VBoxManage startvm Centos701 &#x2013;type headless
</p>

<p>
VBoxManage controlvm ubuntu01 savestate # ä¿å­˜å½“å‰çŠ¶æ€å…³é—­
</p></li>

<li><p>
ä¿®æ”¹vmså†…å­˜æ€»é‡
</p>

<p>
VBoxManage modifyvm Centos701 &#x2013;memory 1024
</p></li>

<li><p>
ä¿®æ”¹vmsç£ç›˜å®¹é‡
</p>

<p>
VBoxManage modifyhd Centos702.vdi &#x2013;resize 7168
</p>

<pre class="example">

å¦‚æœåˆ›å»ºè¿‡å¿«ç…§ï¼Œå¿«ç…§çš„ç£ç›˜ç©ºé—´ä¹Ÿéœ€è¦ä¿®æ”¹
VBoxManage modifyhd \{aea51811-5e79-46e9-b5ba-f66740e6f47b\}.vdi  --resize 10248

</pre></li>

<li><p>
åˆ›å»ºå¿«ç…§
</p>

<p>
VBoxManage snapshot ubuntu01 take ubuntu_basic_ssh
</p>

<p>
VBoxManage snapshot ubuntu01 list
</p>

<p>
VBoxManage snapshot ubuntu01 delete ubuntu_basic
</p>

<p>
VBoxManage snapshot ubuntu01 restore ubuntu_basic_ssh
</p></li>

<li><p>
clone vm
</p>

<p>
VBoxManage clonevm  Centos701 &#x2013;snapshot  centos7_basic  &#x2013;name Centos_basic
</p></li>
</ul>




<pre class="example">

æŸ¥çœ‹å½“å‰è™šæ‹Ÿæœº  VBoxManage list vms  

æŸ¥çœ‹å½“å‰æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœº  VBoxManage list runningvms  

å¯åŠ¨è™šæ‹Ÿæœº  VBoxManage startvm è™šæ‹Ÿæœºå  

æ— å‰ç«¯å›¾å½¢ç•Œé¢æ–¹å¼å¯åŠ¨è™šæ‹Ÿæœº  VBoxManage startvm è™šæ‹Ÿæœºå --type headless  

ä½¿ç”¨ VRDP æ–¹å¼é€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨è™šæ‹Ÿæœºï¼š (3389)  
VBoxManage startvm è™šæ‹Ÿæœºå --type vrdp  

å…³é—­è™šæ‹Ÿæœº  VBoxManage controlvm è™šæ‹Ÿæœºå poweroff  

VBoxManage [-v|-version]         æ˜¾ç¤ºvirtualboxçš„ç‰ˆæœ¬å·  
VBoxManage -nologo               éšè—logo  
VBoxManage -convertSettings      å…è®¸è‡ªåŠ¨è½¬æ¢è®¾ç½®æ–‡ä»¶  
VBoxManage -convertSettingsBackup å…è®¸è‡ªåŠ¨è½¬æ¢è®¾ç½®æ–‡ä»¶ï¼Œå¹¶åœ¨è½¬æ¢å‰ä½œå¤‡ä»½  
VBoxManage -convertSettingsIgnore å…è®¸è‡ªåŠ¨è½¬æ¢è®¾ç½®æ–‡ä»¶ï¼Œä½†æ˜¯ä¸ä¿å­˜ç»“æœ  

VBoxManage list vms|runningvms   æ˜¾ç¤ºåˆ—è¡¨è™šæ‹Ÿæœº|æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœº  
               |ostypes|hostdvds virtualboxæ”¯æŒçš„ç³»ç»Ÿç±»å‹|å®¿ä¸»æœºçš„å…‰ç›˜é©±åŠ¨å™¨  
               |hostfloppies     å®¿ä¸»æœºçš„è½¯ç›˜é©±åŠ¨å™¨  

               |hostifs|hostinfo å®¿ä¸»æœºçš„ç½‘ç»œæ¥å£|å®¿ä¸»æœºçš„ä¿¡æ¯  
               |hdds|dvds        å·²æ³¨å†Œçš„è™šæ‹Ÿç¡¬ç›˜|å·²æ³¨å†Œçš„è™šæ‹Ÿå…‰ç›˜  
               |floppies|usbhost å·²æ³¨å†Œçš„è™šæ‹Ÿè½¯ç›˜|å®¿ä¸»æœºçš„USBè®¾å¤‡  
               |usbfilters       USBç­›é€‰å™¨  
               |systemproperties è™šæ‹Ÿæœºçš„åŸºæœ¬ä¿¡æ¯  
VBoxManage showvminfo &lt;uuid&gt;|&lt;name&gt;     æ˜¾ç¤ºæŒ‡å®šè™šæ‹Ÿæœºçš„ä¿¡æ¯  
                     [-details]         æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯  
                     [-statistics]      æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯  
                     [-machinereadable] ä»¥æ¸…æ™°çš„æ ¼å¼æ˜¾ç¤ºè™šæ‹Ÿæœºä¿¡æ¯  
VBoxManage registervm &lt;filename&gt;       å°†æŒ‡å®šæ–‡ä»¶æ‰€åœ¨çš„è™šæ‹Ÿæœºæ·»åŠ åˆ°åˆ—è¡¨  
VBoxManage unregistervm &lt;uuid&gt;|&lt;name&gt;   ä»è™šæ‹Ÿæœºåˆ—è¡¨æ¸…é™¤æŒ‡å®šçš„è™šæ‹Ÿæœº  
                        [-delete]       ä»è™šæ‹Ÿæœºåˆ—è¡¨åˆ é™¤æŒ‡å®šçš„è™šæ‹Ÿæœº  
VBoxManage createvm     -name &lt;name&gt;    åˆ›å»ºæŒ‡å®šåç§°çš„è™šæ‹Ÿæœº  
                        [-register]      å°†åˆ›å»ºçš„è™šæ‹Ÿæœºæ·»åŠ åˆ°åˆ—è¡¨  
                        [-basefolder &lt;path&gt; æŒ‡å®šè™šæ‹Ÿæœºçš„åŸºç¡€ç›®å½•  
                        [-settingsfile &lt;path&gt;] æŒ‡å®šè™šæ‹Ÿæœºé…ç½®æ–‡ä»¶çš„åŸºç¡€ç›®å½•  
                        [-uuid &lt;uuid&gt;] åˆ›å»ºæŒ‡å®šuuidçš„è™šæ‹Ÿæœº  
VBoxManage modifyvm     &lt;uuid|name&gt;       ç¼–è¾‘æŒ‡å®šçš„è™šæ‹Ÿæœºçš„é…ç½®  
                        [-name &lt;name&gt;]    ä¿®æ”¹è™šæ‹Ÿæœºçš„åç§°  
                        [-ostype &lt;ostype&gt;]ä¿®æ”¹è™šæ‹Ÿæœºçš„æ“ä½œç³»ç»Ÿç±»å‹  
                        [-memory &lt;memorysize&gt;]   ä¿®æ”¹è™šæ‹Ÿæœºçš„å†…å­˜å¤§å°  
                        [-vram &lt;vramsize&gt;]       ä¿®æ”¹è™šæ‹Ÿæœºçš„æ˜¾å­˜å¤§å°  
                        [-acpi on|off]           å¯åŠ¨æˆ–ç¦æ­¢acpiç”µæºç®¡ç†æ¥å£  
                        [-ioapic on|off]         å¯åŠ¨æˆ–ç¦æ­¢I/O APICç”µæºç®¡ç†æ¥å£  
                        [-pae on|off]            å¯åŠ¨æˆ–ç¦æ­¢CPUçš„PAEæ”¯æŒï¼ŒPAEæ˜¯  
Physical Address Extension : ç‰©ç†åœ°å€æ‰©å±•  
                        [-hwvirtex on|off|default]å¯åŠ¨æˆ–ç¦æ­¢CPUçš„ç¡¬ä»¶è™šæ‹ŸåŒ–æ”¯æŒ  
                        [-nestedpaging on|off]    å¼€å¯æˆ–å…³é—­CPUçš„åµŒå¥—é¡µé¢åˆ—è¡¨æ”¯æŒ  
                        [-monitorcount &lt;number&gt;] è®¾ç½®æ˜¾ç¤ºå™¨æ•°ç›®ï¼ŒVRDPå¤šç”¨æˆ·æ¨¡å¼æ—¶  
                        [-bioslogofadein on|off] å¼€å¯æˆ–å…³é—­bioslogoæ¸æ˜¾æ•ˆæœ  
                        [-bioslogofadeout on|off] å¼€å¯æˆ–å…³é—­bioslogoæ¸éšæ•ˆæœ  
                        [-bioslogodisplaytime &lt;msec&gt;]è®¾ç½®bioslogoæ˜¾ç¤ºæ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½)  
                        [-bioslogoimagepath &lt;imagepath&gt;]è®¾ç½®bioslogoå›¾åƒè·¯å¾„ï¼Œç”¨äºè‡ªå®šä¹‰bioslogo  
                        [-biosbootmenu disabled| è®¾ç½®æ˜¯å¦æ˜¾ç¤ºbioså¯åŠ¨èœå• å…³é—­  
                                       menuonly| åªèœå•  
                                       messageandmenu] ä¿¡æ¯å’Œèœå•  
                        [-biossystemtimeoffset &lt;msec&gt;] è®¾ç½®biosç³»ç»Ÿæ—¶é—´è¡¥å¿ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰  
                        [-biospxedebug on|off] æ‰“å¼€æˆ–å…³é—­biospxeè°ƒè¯•  
                        [-boot&lt;1-4&gt; none|floppy|dvd|disk|net&gt;] è®¾ç½®å¯åŠ¨é¡ºåº  
                        [-hd&lt;a|b|d&gt; none|&lt;uuid&gt;|&lt;filename&gt;] ä¸ºè™šæ‹Ÿæœºæ·»åŠ ä¸‰ä¸ªIDEè®¾å¤‡ä¹‹ä¸€ï¼ˆç¬¬2ä¸ªä¸»ç›˜è¢«vmä¿ç•™ä½œä¸ºå…‰é©±ï¼Œä¸èƒ½å ç”¨ï¼‰åœ¨ä¸‰ä¸ªIDEä¸­ï¼Œä½ å¯ä»¥æŒ‡å®šï¼ˆç¡¬ç›˜ï¼‰çš„vdiæ–‡ä»¶åæˆ–è€…å®ƒçš„UUID  
                        [-idecontroller PIIX3|PIIX4] è®¾ç½®IDEæ§åˆ¶å™¨çš„ç±»å‹  
                        [-sata on|off] å¼€å¯æˆ–å…³é—­SATAç¡¬ç›˜æ§åˆ¶å™¨  
                        [-sataportcount &lt;1-30&gt;] è®¾ç½®è™šæ‹Ÿæœºæœ€å¤šæ”¯æŒçš„SATAæ§åˆ¶å™¨æ•°ç›®  
                        [-sataport&lt;1-30&gt; none| æ²¡æœ‰ç¡¬ç›˜è¿æ¥åˆ°SATAæ§åˆ¶å™¨  
                                       &lt;uuid&gt;| æŒ‡å®šuuidçš„ç¡¬ç›˜è¿æ¥åˆ°SATAæ§åˆ¶å™¨  
                                       &lt;filename&gt;] æŒ‡å®šæ–‡ä»¶åçš„ç¡¬ç›˜è¿æ¥åˆ°SATAæ§åˆ¶å™¨  
                        [-sataideemulation&lt;1-4&gt; &lt;1-30&gt;] æŒ‡å®šä¸€ä¸ªSATAè®¾å¤‡å·¥ä½œåœ¨IDEå…¼å®¹æ¨¡å¼ï¼ŒIDEè®¾å¤‡ç¼–å·æ˜¯1-4ï¼ŒSATAè®¾å¤‡ç¼–å·æ˜¯1-30  
                        [-dvd none| ä¸è¿æ¥DVDå…‰é©±  
                            &lt;uuid&gt;| æŒ‡å®šUUIDçš„DVDå…‰é©±è¿æ¥  
                        &lt;filename&gt;| å°†æŒ‡å®šçš„å…‰ç›˜æ˜ åƒæ–‡ä»¶æŒ‚æ¥åˆ°DVDå…‰é©±  
                      host:&lt;drive&gt;] å°†å®¿ä¸»æœºçš„DVDå…‰é©±æŒ‚æ¥åˆ°è™šæ‹Ÿæœºçš„DVDå…‰é©±  
                        [-dvdpassthrough on|off]æ‰“å¼€|å…³é—­è™šæ‹Ÿæœºé‡Œå…‰ç›˜çš„åˆ»å½•åŠŸèƒ½  
                        [-floppy disabled| ä¸è¿æ¥è½¯é©±  
                                    empty| è¿æ¥è½¯é©±ä½†ä¸æ’å…¥è½¯ç›˜  
                                   &lt;uuid&gt;| æŒ‡å®šUUIDçš„è½¯é©±è¿æ¥  
                               &lt;filename&gt;| å°†æŒ‡å®šçš„è½¯ç›˜æ˜ åƒæ–‡ä»¶æŒ‚æ¥åˆ°è½¯é©±é©±  
                             host:&lt;drive&gt;] å°†å®¿ä¸»æœºçš„è½¯é©±é©±æŒ‚æ¥åˆ°è™šæ‹Ÿæœºçš„è½¯é©±  
                        [-nic&lt;1-N&gt; none| è™šæ‹Ÿæœºä¸æ·»åŠ ç½‘å¡  
                                   null| è™šæ‹Ÿæœºæœ‰ç½‘å¡ä½†ä¸è¿æ¥  
                                    nat| ç½‘ç»œè¿æ¥ä½¿ç”¨NATæ¨¡å¼  
                                 hostif| ç½‘ç»œè¿æ¥ä½¿ç”¨æ¡¥æ¥æ¨¡å¼  
                                 intnet] ç½‘ç»œè¿æ¥ä½¿ç”¨å†…éƒ¨ç½‘ç»œæ¨¡å¼  
                        [-nictype&lt;1-N&gt; Am79C970A| è™šæ‹Ÿæœºè¿æ¥AMD PCNet PCI IIç½‘å¡  
                                        Am79C973| è™šæ‹Ÿæœºè¿æ¥AMD PCNet FAST IIIç½‘å¡ï¼ˆé»˜è®¤ï¼‰  
                                         82540EM| è™šæ‹Ÿæœºè¿æ¥Intel PRO/1000 MT Desktopç½‘å¡  
                                         82543GC] è™šæ‹Ÿæœºè¿æ¥Intel PRO/1000 T Serverç½‘å¡  
                        [-cableconnected&lt;1-N&gt; on|off]æ’å…¥æˆ–æ‹”å‡ºç½‘çº¿  
                        [-nictrace&lt;1-N&gt; on|off] å¼€å¯æˆ–å…³é—­ç½‘ç»œè¿½è¸ª  
                        [-nictracefile&lt;1-N&gt; &lt;filename&gt;] å°†ç½‘ç»œæµé‡è¿½è¸ªæ•°æ®ä¿å­˜åˆ°æ–‡ä»¶  
                        [-nicspeed&lt;1-N&gt; &lt;kbps&gt;] è®¾ç½®ç½‘ç»œè¿æ¥çš„é€Ÿåº¦  
                        [-hostifdev&lt;1-N&gt; none| ä¸è¿æ¥åˆ°ä¸»æœºç½‘ç»œæ¥å£  
                                 &lt;devicename&gt;] æ¡¥æ¥æ¨¡å¼ä¸‹è¿æ¥åˆ°æŒ‡å®šçš„ä¸»æœºæ¥å£  
                        [-intnet&lt;1-N&gt; &lt;network name&gt;] å†…ç½‘æ¨¡å¼ä¸‹ä¸ºè™šæ‹ŸæœºæŒ‡å®šå†…éƒ¨ç½‘ç»œåç§°  
                        [-natnet&lt;1-N&gt; &lt;network&gt;| é…ç½®NATç½‘ç»œæ¥å£çš„åœ°å€  
                                        default] é»˜è®¤NATç½‘ç»œæ¥å£çš„åœ°å€æ˜¯10.0.x.0/24  
                        [-macaddress&lt;1-N&gt; auto| è‡ªåŠ¨ç”Ÿæˆè™šæ‹Ÿç½‘å¡çš„MACåœ°å€  
                                         &lt;mac&gt;] æŒ‡å®šè™šæ‹Ÿç½‘å¡çš„MACåœ°å€  
                        [-uart&lt;1-N&gt; off| ä¸å¯ç”¨è™šæ‹Ÿä¸²å£  
                        &lt;I/O base&gt; &lt;IRQ&gt;]å¯ç”¨è™šæ‹Ÿä¸²å£ï¼Œå¹¶è®¾ç½®è™šæ‹Ÿä¸²å£çš„I/Oå‚æ•°å’ŒIRQå‚æ•°  
                        [-uartmode&lt;1-N&gt; disconnected| å¯ç”¨è™šæ‹Ÿä¸²å£ï¼Œä½†ä¸è¿æ¥åˆ°å®¿ä¸»æœºçš„ä¸²å£  
                                       server &lt;pipe&gt;| åœ¨å®¿ä¸»æœºåˆ›å»ºPIPEé€šé“ï¼Œå¹¶å°†è™šæ‹Ÿæœºä¸²å£è¿æ¥åˆ°è¿™ä¸ªé€šé“  
                                       client &lt;pipe&gt;| ä¸åˆ›å»ºPIPEé€šé“ï¼Œè€Œæ˜¯å°†è™šæ‹Ÿæœºä¸²å£è¿æ¥åˆ°å·²å­˜åœ¨çš„é€šé“  
                                       &lt;devicename&gt;] å°†è™šæ‹Ÿæœºä¸²å£è¿æ¥åˆ°å®¿ä¸»æœºçš„ä¸²å£  
                        [-gueststatisticsinterval &lt;seconds&gt;] é…ç½®è™šæ‹Ÿæœºé™æ€æ—¶é—´é—´éš”  
                        [-audio none| è™šæ‹Ÿæœºä¸è¿æ¥å£°å¡  
                                null| å°†è™šæ‹Ÿæœºçš„å£°å¡è¿æ¥åˆ°ç©ºçš„å£°éŸ³è®¾å¤‡  
                              dsound] å°†è™šæ‹Ÿæœºçš„å£°å¡è¿æ¥åˆ°å®¿ä¸»æœºçš„å£°å¡  
                        [-audiocontroller ac97| å°†è™šæ‹Ÿæœºå£°å¡è™šæ‹Ÿä¸ºICH AC97å£°å¡  
                                          sb16] å°†è™šæ‹Ÿæœºå£°å¡è™šæ‹Ÿä¸ºsoundblaster 16å£°å¡  
                        [-clipboard disabled| ä¸å…±äº«å‰ªè´´æ¿  
                                 hosttoguest| å°†å®¿ä¸»æœºçš„å‰ªè´´æ¿å…±äº«ç»™è™šæ‹Ÿæœº  
                                 guesttohost| å°†è™šæ‹Ÿæœºçš„å‰ªè´´æ¿å…±äº«ç»™å®¿ä¸»æœº  
                               bidirectional] å®¿ä¸»æœºå’Œè™šæ‹Ÿæœºå…±ä½¿ç”¨ä¸€ä¸ªå‰ªè´´æ¿  
                        [-vrdp on|off] å¼€å¯|å…³é—­virtualboxå†…ç½®çš„VRDPæœåŠ¡å™¨  
                        [-vrdpport default| ä½¿ç”¨é»˜è®¤çš„vrdpç«¯å£3389  
                                    &lt;port&gt;] æŒ‡å®švrdpç«¯å£  
                        [-vrdpaddress &lt;host&gt;] æŒ‡å®šVRDPä¸»æœºåœ°å€  
                        [-vrdpauthtype null| ä¸ç”¨æˆæƒï¼Œä»»ä½•å®¢æˆ·æœºéƒ½å¯ä»¥è¿æ¥åˆ°VRDPæœåŠ¡å™¨  
                                   external| åªæœ‰å®¿ä¸»æœºçš„ç”¨æˆ·æ‰å¯ä»¥è¿æ¥åˆ°VRDPæœåŠ¡å™¨  
                                      guest] åªæœ‰è™šæ‹Ÿæœºçš„ç”¨æˆ·æ‰å¯ä»¥è¿æ¥åˆ°VRDPæœåŠ¡å™¨  
                        [-vrdpmulticon on|off] æ‰“å¼€|å…³é—­VRDPå¤šç”¨æˆ·è¿æ¥æ¨¡å¼  
                        [-vrdpreusecon on|off] æ‰“å¼€|å…³é—­VRDPæ–­çº¿é‡è¿  
                        [-usb on|off] æ‰“å¼€|å…³é—­è™šæ‹ŸUSBæ§åˆ¶å™¨  
                        [-usbehci on|off] æ‰“å¼€|å…³é—­è™šæ‹ŸUSB2.0æ§åˆ¶å™¨  
                        [-snapshotfolder default| å°†ç³»ç»Ÿå¿«ç…§ä¿å­˜åˆ°é»˜è®¤æ–‡ä»¶å¤¹  
                                          &lt;path&gt;] å°†ç³»ç»Ÿå¿«ç…§ä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶å¤¹  
VBoxManage startvm      &lt;uuid&gt;|&lt;name&gt; å¼€å¯æŒ‡å®šUUID|åç§°çš„è™šæ‹Ÿæœº  
                        [-type gui|vrdp] è®¾ç½®è™šæ‹Ÿæœºæ ‡å‡†æ˜¾ç¤ºè®¾å¤‡GUIç•Œé¢|VRDP  
VBoxManage controlvm    &lt;uuid&gt;|&lt;name&gt; æ”¹å˜æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœºçš„çŠ¶æ€  
                         pause| æš‚åœï¼Œè¿™æ—¶è™šæ‹Ÿæœºçª—å£æ˜¾ç¤ºç°è‰²  
                        resume| æ¢å¤æš‚åœçš„è™šæ‹Ÿæœº  
                         reset| å¤ä½  
                      poweroff| å¼ºè¡Œå…³é—­  
               acpipowerbutton| å…³æœº  
               acpisleepbutton| ä½¿è™šæ‹Ÿæœºå¤„äºç¡çœ çŠ¶æ€  
                     savestate| ä¿å­˜çŠ¶æ€ç„¶åå…³é—­ï¼Œç›¸å½“äºä¼‘çœ   
           keyboardputscancode &lt;hex&gt; [&lt;hex&gt; ...] é”®ç›˜æ‰«æç è®¾ç½®  
               setlinkstate&lt;1-4&gt; on|off è¿æ¥|æ–­å¼€ç½‘ç»œè¿æ¥  
               usbattach &lt;uuid&gt;|&lt;address&gt; è¿æ¥åˆ°æŒ‡å®šUUDI|åœ°å€çš„USBè®¾å¤‡   
               usbdetach &lt;uuid&gt;|&lt;address&gt; æ–­å¼€æŒ‡å®šUUDI|åœ°å€çš„USBè®¾å¤‡     
               dvdattach none| ä¸è¿æ¥è™šæ‹ŸDVDå…‰é©±  
                       &lt;uuid&gt;| è¿æ¥åˆ°æŒ‡å®šUUIDçš„DVDå…‰é©±  
                   &lt;filename&gt;| è¿æ¥åˆ°æŒ‡å®šåç§°çš„DVDæ˜ åƒæ–‡ä»¶  
                  host:&lt;drive&gt; è¿æ¥åˆ°å®¿ä¸»æœºçš„DVDå…‰é©±  
               floppyattach none| ä¸è¿æ¥è™šæ‹Ÿè½¯é©±  
                          &lt;uuid&gt;| è¿æ¥åˆ°æŒ‡å®šUUIDçš„è™šæ‹Ÿè½¯é©±  
                      &lt;filename&gt;| è¿æ¥åˆ°æŒ‡å®šåç§°çš„è½¯ç›˜æ˜ åƒæ–‡ä»¶  
                     host:&lt;drive&gt; è¿æ¥åˆ°å®¿ä¸»æœºçš„è½¯é©±  
               setvideomodehint &lt;xres&gt; è®¾ç½®è™šæ‹Ÿæœºçš„å±å¹•åˆ†è¾¨ç‡ æ°´å¹³åƒç´   
                                &lt;yres&gt; å‚ç›´åƒç´   
                                 &lt;bpp&gt; é¢œè‰²æ·±åº¦  
                             [display] åˆ·æ–°é¢‘ç‡  
               setcredentials &lt;username&gt; æŒ‡å®šVRDPè‡ªåŠ¨è¿æ¥å‚æ•° ç”¨æˆ·å  
                              &lt;password&gt; å¯†ç   
                                &lt;domain&gt; åŸŸ  
             [-allowlocallogon &lt;yes|no&gt;] å…è®¸|ç¦æ­¢æœ¬åœ°ç™»é™†  
VBoxManage discardstate     &lt;uuid&gt;|&lt;name&gt; ä¸¢å¼ƒæŒ‡å®šUUID|åç§°çš„è™šæ‹Ÿæœºçš„ä¿å­˜çŠ¶æ€  
VBoxManage adoptstate       &lt;uuid&gt;|&lt;name&gt; &lt;state_file&gt; å°†è™šæ‹Ÿæœºä»æŒ‡å®šçš„ä¿å­˜çŠ¶æ€ä¸­æ¢å¤  
VBoxManage snapshot         &lt;uuid&gt;|&lt;name&gt; ä¸ºæŒ‡å®šçš„è™šæ‹Ÿæœºæ‹å¿«ç…§  
                            take &lt;name&gt; ä¸ºå¿«ç…§å–å  
                        [-desc &lt;desc&gt;]| ç»™å¿«ç…§æ·»åŠ æè¿°  
                        discard &lt;uuid&gt;|&lt;name&gt; | ä¸¢å¼ƒæŒ‡å®šçš„å¿«ç…§   
                        discardcurrent -state| æ¢å¤åˆ°æœ€è¿‘çš„å¿«ç…§  
                                        -all | æ¢å¤åˆ°å€’æ•°ç¬¬äºŒä¸ªå¿«ç…§  
                        edit &lt;uuid&gt;|&lt;name&gt;| ç¼–è¾‘æŒ‡å®šçš„å¿«ç…§  
                                   -current ç¼–è¾‘å½“å‰å¿«ç…§  
                          [-newname &lt;name&gt;] ä¿®æ”¹å¿«ç…§åç§°  
                          [-newdesc &lt;desc&gt;] ä¿®æ”¹å¿«ç…§æè¿°  
                        showvminfo &lt;uuid&gt;|&lt;name&gt; æ˜¾ç¤ºå¿«ç…§çš„è™šæ‹Ÿæœºä¿¡æ¯  
VBoxManage registerimage    disk|dvd|floppy &lt;filename&gt; æ³¨å†Œç¡¬ç›˜ã€å…‰ç›˜ã€è½¯ç›˜æ˜ åƒæ–‡ä»¶  
                            [-type normal| æ³¨å†Œä¸ºæ™®é€šç±»å‹ï¼ˆå¯åˆ›å»ºå¿«ç…§ï¼Œå¯è¯»å†™ï¼‰  
                                immutable| æ³¨å†Œä¸ºåªè¯»ç±»å‹ï¼ˆç›¸å½“äºåŠ äº†ç¡¬ç›˜å¡ï¼‰  
                             writethrough] æ³¨å†Œä¸ºå¯å†™ç±»å‹ï¼ˆè¿™ç§ç±»å‹ä¸èƒ½åˆ›å»ºå¿«ç…§ï¼‰  
                               (disk only) (æ³¨å†Œç±»å‹é€‰é¡¹åªé€‚ç”¨äºç¡¬ç›˜ï¼‰  
VBoxManage unregisterimage disk| ä»è™šæ‹Ÿä»‹è´¨ç®¡ç†å™¨åˆ é™¤æŒ‡å®šçš„ç¡¬ç›˜  
                             dvd| ä»è™šæ‹Ÿä»‹è´¨ç®¡ç†å™¨åˆ é™¤æŒ‡å®šçš„DVDå…‰ç›˜   
                           floppy ä»è™šæ‹Ÿä»‹è´¨ç®¡ç†å™¨åˆ é™¤æŒ‡å®šçš„è½¯ç›˜  
                          &lt;uuid&gt;| åˆ é™¤æ—¶æŒ‡å®šUUID  
                       &lt;filename&gt; åˆ é™¤æ—¶æŒ‡å®šæ˜ åƒæ–‡ä»¶  
VBoxManage showvdiinfo      &lt;uuid&gt;|&lt;filename&gt; æ˜¾ç¤ºæŒ‡å®šUUID|åç§°è™šæ‹Ÿç¡¬ç›˜çš„ä¿¡æ¯  

VBoxManage createvdi        -filename &lt;filename&gt; åˆ›å»ºæŒ‡å®šåç§°çš„è™šæ‹Ÿç¡¬ç›˜  
                            -size &lt;megabytes&gt; æŒ‡å®šè™šæ‹Ÿç¡¬ç›˜çš„å¤§å°ï¼ˆä»¥å…†ä¸ºå•ä½ï¼‰  
                            [-static] åˆ›å»ºå›ºå®šå¤§å°çš„è™šæ‹Ÿç¡¬ç›˜  
                            [-comment &lt;comment&gt;] æ·»åŠ ä¸€æ®µè§£é‡Šæ€§æ–‡å­—  
                            [-register] æ³¨å†Œæ–°åˆ›å»ºçš„è™šæ‹Ÿç¡¬ç›˜  
                            [-type normal| æ³¨å†Œç±»å‹ æ™®é€šï¼ˆå¯ä»¥åˆ›å»ºå¿«ç…§ï¼‰  
                             writethrough] æ³¨å†Œç±»å‹ å¯å†™ï¼ˆä¸èƒ½åˆ›å»ºå¿«ç…§ï¼‰  
                          (default: normal) é»˜è®¤æ˜¯æ™®é€šç±»å‹  
VBoxManage modifyvdi        &lt;uuid&gt;|&lt;filename&gt; compact å‹ç¼©æŒ‡å®šçš„è™šæ‹Ÿç¡¬ç›˜  
VBoxManage clonevdi         &lt;uuid&gt;|&lt;filename&gt; &lt;outputfile&gt; å…‹éš†æŒ‡å®šçš„VDIè™šæ‹Ÿç¡¬ç›˜  
VBoxManage convertdd        [-static] &lt;filename&gt; &lt;outputfile&gt; å°†rawç¡¬ç›˜è½¬æ¢æˆvdiè™šæ‹Ÿç¡¬ç›˜  
VBoxManage convertdd        [-static] stdin &lt;outputfile&gt; &lt;bytes&gt; å°†æ ‡å‡†è¾“å…¥å‚æ•°æŒ‡å®šçš„è®¾å¤‡è½¬æ¢æˆvdiè™šæ‹Ÿç¡¬ç›˜ï¼Œæ¯”å¦‚ï¼šdd if=/dev/sda1 | VBoxManage convertdd stdin /media/disk/C.vdi 62277025792  

</pre>
</div>
</div>

<div id="outline-container-org1b3804c" class="outline-2">
<h2 id="org1b3804c">centos7 basic environment</h2>
<div class="outline-text-2" id="text-org1b3804c">
<p>
centos7 download
<a href="http://isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-1708.iso">http://isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-1708.iso</a>
</p>
</div>

<div id="outline-container-org588fc3a" class="outline-3">
<h3 id="org588fc3a">lvm</h3>
<div class="outline-text-3" id="text-org588fc3a">
<p>
åœ¨æ–‡ä»¶ä¸­æ·»åŠ è¦æŒ‚è½½çš„åˆ†åŒºå’Œæ–‡ä»¶ç›®å½•å¯ä»¥ä¿®æ”¹æ–‡ä»¶
</p>

<p>
/etc/fstab
</p>

<p>
<i>dev/sda5</i>    media/win    ntfs    defaults   02
</p>

<p>
ç„¶å mount -a
</p>

<ol class="org-ol">
<li><p>
æŸ¥çœ‹å‡ å—ç¡¬ç›˜
</p>

<p>
sudo fdisk -l |grep sd
</p></li>

<li><p>
åˆ›å»ºåˆ†åŒº
</p>

<p>
è™šæ‹Ÿæœºç°æœ‰20gçš„ç¡¬ç›˜,ä½¿ç”¨fdiskåˆ’åˆ†ç£ç›˜
</p>

<p>
sudo fdisk /dev/sda
</p>

<p class="verse">
m  å¸®åŠ©ä¿¡æ¯<br />
n åˆ›å»ºåˆ†åŒº<br />
e æ‰©å±•åˆ†åŒº    +5G  pppp/pppe<br />
p æ‰“å°åˆ†åŒº<br />
t åˆ†åŒºç±»å‹ L  (lvm)<br />
w å†™å…¥ä¿å­˜åˆ†åŒº<br />
</p></li>

<li>æ ¼å¼åŒ– åˆ†åŒº</li>

<li><p>
LVM
pv &#x2013;&gt; vg &#x2013;&gt; lv
å‚è€ƒ:
<a href="http://blog.sina.com.cn/s/blog_b77735d20101e5cn.html">http://blog.sina.com.cn/s/blog_b77735d20101e5cn.html</a>
<a href="http://aurthurxlc.github.io/Aurthur-2017/Centos-7-extend-lvm-volume.html">http://aurthurxlc.github.io/Aurthur-2017/Centos-7-extend-lvm-volume.html</a>
</p>

<pre class="example">
fdisk -l | grep sd
fdisk /dev/sda
partprobe
pvdisplay
pvcreate /dev/sda3
vgdisplay
vgextend centos /dev/sda3
lvdisplay
#lvcreate -L 3.31G -n manue1 centos
#mkfs.xfs /dev/centos/manue1
#lvremove -f /dev/centos/manue1
lvextend -l +100%FREE /dev/centos/root
df -Th
xfs_growfs /dev/centos/root
</pre></li>
</ol>
</div>
</div>
<div id="outline-container-org00b129e" class="outline-3">
<h3 id="org00b129e">ip</h3>
<div class="outline-text-3" id="text-org00b129e">
<ul class="org-ul">
<li><p>
è”ç½‘æ–¹å¼: é…ç½®ä¸‰å¼ ç½‘å¡
virtualBox ä¸­ NAT å’Œ Host-only ä¸¤ç§æ¨¡å¼ä¸èƒ½åŒæ—¶å¹¶å­˜ï¼Œæµ‹è¯•åªèƒ½è”ç½‘çš„æ—¶å€™å…³æ‰å¦ä¸€å¼ ç½‘å¡
</p>
<ol class="org-ol">
<li>NAT 
ç½‘å¡1 ç”¨æ¥è¿æ¥å¤–ç½‘</li>
<li><p>
Host-only
ç”¨æ¥é…ç½®é™æ€IP é…ç½®é›†ç¾¤æœåŠ¡çš„æ—¶å€™ä¸éœ€è¦ä¿®æ”¹IP
vi <i>etc/sysconfig/network-scripts</i>  
</p>
<pre class="example">
#static assignment
ONBOOT=yes
BOOTPROTO=static
IPADDR=192.168.56.10
NETMASK=255.255.255.0
GATEWAY=192.168.56.1
</pre></li>
<li>Bridge
vbox è‡ªåŠ¨é…ç½®IPï¼Œä¹Ÿå¾ˆæ–¹ä¾¿</li>
</ol>

<p>
è¿™è¾¹æ‰“ç®—ä½¿ç”¨ç½‘å¡1 natæ¨¡å¼è¿æ¥å¤–ç½‘ï¼Œç½‘å¡3çš„æ¡¥æ¥æ¨¡å¼ä¸å±€åŸŸç½‘å†…å…¶ä»–ä¸»æœºé€šä¿¡,ç½‘å¡äºŒçš„ä¸»æœºæ¨¡å¼æ­å»ºé›†ç¾¤
</p>

<p>
æ³¨æ„ï¼š ç½‘å¡äºŒå’Œç½‘å¡ä¸‰çš„ gateway å­—æ®µè¦æ³¨é‡Šæ‰
</p></li>

<li><p>
ip tool
</p>

<p>
Ip  [é€‰é¡¹]  æ“ä½œå¯¹è±¡{link|addr|route&#x2026;}
</p>

<p>
sudo service network restart
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org2a3b151" class="outline-3">
<h3 id="org2a3b151">sshd</h3>
<div class="outline-text-3" id="text-org2a3b151">
<p>
ssh è¿æ¥å¼‚å¸¸æ…¢
sudo vi /etc/ssh/sshd_config
</p>

<pre class="example">
UseDNS no
</pre>
</div>
</div>

<div id="outline-container-org2a80c9b" class="outline-3">
<h3 id="org2a80c9b">hostname</h3>
<div class="outline-text-3" id="text-org2a80c9b">
<p>
æ°¸ä¹…ä¿®æ”¹ä¸»æœºåå­—
sudo hostnamectl &#x2013;static set-hostname master
</p>

<p>
sudo vi /etc/hosts
</p>

<p>
[manue1@localhost ~]$ cat /etc/hostname
 master
[manue1@localhost ~]$ cat /etc/hosts
 127.0.0.1 master
 ::1 master
</p>
</div>
</div>
<div id="outline-container-org3bf8d8e" class="outline-3">
<h3 id="org3bf8d8e">yum source</h3>
<div class="outline-text-3" id="text-org3bf8d8e">
<p>
sudo yum -y install wget
</p>

<ul class="org-ul">
<li>å¤‡ä»½
sudo mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</li>

<li>è®¾ç½®aliyun source
sudo wget -O /etc/yum.repos.d/CentOS-Base.repo <a href="http://mirrors.aliyun.com/repo/Centos-7.repo">http://mirrors.aliyun.com/repo/Centos-7.repo</a></li>

<li><p>
è®¾ç½®EPLEPEL source
</p>

<p>
sudo wget -P <i>etc/yum.repos.d</i> <a href="http://mirrors.aliyun.com/repo/epel-7.repo">http://mirrors.aliyun.com/repo/epel-7.repo</a>
</p>

<p>
æ·»åŠ åå¯ä»¥åƒfedoraä¸Š yum install packname
</p></li>

<li><p>
æ¸…ç†ç¼“å­˜å¹¶ç”Ÿæˆæ–°çš„ç¼“å­˜
</p>

<p>
sudo yum clean all  
sudo yum makecache  
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org1b5ae82" class="outline-3">
<h3 id="org1b5ae82">ntp</h3>
<div class="outline-text-3" id="text-org1b5ae82">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">master</th>
<th scope="col" class="org-left">server</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">slave01</td>
<td class="org-left">client</td>
</tr>

<tr>
<td class="org-left">slave02</td>
<td class="org-left">client</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li><p>
any nodes
</p>

<p>
sudo yum -y install ntp
</p>

<p>
timedatectl set-timezone Asia/Shanghai   # è®¾ç½®ä¸Šæµ·æ—¶åŒº
</p>

<ul class="org-ul">
<li><p>
server configural
</p>

<p>
systemctl start ntpd
</p>

<p>
systemctl enable ntpd
</p>

<p>
vi /etc/ntp.conf 
</p>

<pre class="example">

restrict 192.168.56.0 mask 255.255.0.0

server 127.127.1.0

fudge 127.127.1.0 stratum 10
</pre>

<p>
systemctl restart ntpd
</p></li>

<li><p>
client configural
</p>

<p>
systemctl start ntpd
</p>

<p>
systemctl enable ntpd
</p>

<p>
vi /etc/ntp.conf
</p>

<pre class="example">
server 192.168.56.10

</pre>

<p>
netstat -anp | grep 123
</p></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org4f3511d" class="outline-3">
<h3 id="org4f3511d">firewallds</h3>
<div class="outline-text-3" id="text-org4f3511d">
<ul class="org-ul">
<li>æŸ¥çœ‹çŠ¶æ€
systemctl status firewalld</li>
<li>å…³é—­
systemctl stop firewalld</li>
<li>ç¦ç”¨
systemctl disable firewalld</li>
</ul>
</div>
</div>
<div id="outline-container-org22d07b4" class="outline-3">
<h3 id="org22d07b4">disable selinux</h3>
<div class="outline-text-3" id="text-org22d07b4">
<p>
ä¸€æ¬¾ä¸ºäº†æé«˜ç³»ç»Ÿå®‰å…¨æ€§çš„è½¯ä»¶ï¼šå¯¹ç³»ç»ŸæœåŠ¡ï¼Œæ–‡ä»¶æƒé™ï¼Œç½‘ç»œç«¯å£è®¿é—®æœ‰æå…¶ä¸¥æ ¼çš„é™åˆ¶ï¼Œ
ä¾‹å¦‚ï¼šå¦‚æœå¯¹ä¸€ä¸ªæ–‡ä»¶æ²¡æœ‰æ­£ç¡®å®‰å…¨ä¸Šä¸‹æ–‡é…ç½®ï¼Œ ç”šè‡³ä½ æ˜¯rootç”¨æˆ·ï¼Œä½ ä¹Ÿä¸èƒ½å¯åŠ¨æŸæœåŠ¡
</p>

<p>
sudo vi /etc/sysconfig/selinux
 selinux = disable
</p>
</div>
</div>
<div id="outline-container-orge03b1b0" class="outline-3">
<h3 id="orge03b1b0">java  &amp; scala</h3>
<div class="outline-text-3" id="text-orge03b1b0">
<p>
åŸºç¡€ç¯å¢ƒç”¨root é…ç½®åœ¨/etc/profile è‡ªå¯åŠ¨ç¯å¢ƒæ–‡ä»¶å†…
refer : <a href="https://www.mtyun.com/library/how-to-setup-scala-on-centos7">https://www.mtyun.com/library/how-to-setup-scala-on-centos7</a>
</p>
<ul class="org-ul">
<li>java rpm install

<ol class="org-ol">
<li>download
<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></li>
<li><p>
install
sudo rpm -ivh jdk-8u144-linux-x64.rpm
sudo rpm -aq | grep jdk
</p>

<p>
sudo rpm -e jdk   æ— æ•ˆ
sudo yum remove jdk  
</p>

<p>
sudo vi /etc/profile
</p>
<pre class="example">
#JAVA_HOME
export JAVA_HOME=/usr/java/jdk1.8.0_144
export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export PATH=$PATH:$JAVA_HOME/bin
</pre></li>
</ol></li>
<li><p>
java ç¦»çº¿åŒ…å®‰è£…
</p>

<p>
tar -zxvf jdk-8u151-linux-x64.tar.gz
</p>

<p>
vi /etc/profile
</p>
<pre class="example">
#JAVA_HOME
JAVA_HOME=/home/manue1/opt/jdk8
PATH=$PATH:$JAVA_HOME/bin
export JAVA_HOME PATH
</pre></li>
<li><p>
scala ç¦»çº¿åŒ…å®‰è£…
å½“å‰æœ€æ–°ç‰ˆæœ¬
tar zxvf scala-2.11.7.tgz
</p>

<pre class="example">
SCALA_HOME=/home/manue1/opt/scala-2.11.7
PATH=$PATH:$SCALA_HOME/bin
export SCALA_HOME PATH
</pre></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org82ec85a" class="outline-2">
<h2 id="org82ec85a">hadoop é›†ç¾¤é…ç½®</h2>
<div class="outline-text-2" id="text-org82ec85a">
</div>
<div id="outline-container-org0e6ab07" class="outline-3">
<h3 id="org0e6ab07">hadoop hbase spark ç‰ˆæœ¬é€‰æ‹©</h3>
<div class="outline-text-3" id="text-org0e6ab07">
<ul class="org-ul">
<li><p>
hbase æ”¯æŒ hadoop ç‰ˆæœ¬å¯¹ç…§è¡¨
</p>

<p>
The 1.2.x series is the current stable release line
</p>

<p>
<a href="http://www-us.apache.org/dist/hbase/">http://www-us.apache.org/dist/hbase/</a>
</p>

<p>
ä¸‹é¢æŸ¥çœ‹1.2.x éœ€è¦çš„hadoopç‰ˆæœ¬
</p>

<p>
<a href="http://hbase.apache.org/book.html#arch.overview">http://hbase.apache.org/book.html#arch.overview</a>
</p>

<p>
crtl + F  "s" æœç´¢é¡µé¢
</p>

<p>
é€‰æ‹© Hadoop-2.7.1+
</p></li>

<li><p>
spark æ”¯æŒ hadoop
</p>

<p>
<a href="http://spark.apache.org/downloads.html">http://spark.apache.org/downloads.html</a>
</p>

<p>
å®˜æ–¹ä¸‹è½½é¡µé¢å¯ä»¥æ‰‹åŠ¨é€‰æ‹©
</p></li>

<li><p>
hive æ”¯æŒ hadoop
</p>

<p>
<a href="https://hive.apache.org/downloads.html">https://hive.apache.org/downloads.html</a>
</p>

<p>
ç¨³å®šç‰ˆä¸‹è½½åœ°å€
</p>

<p>
<a href="http://mirrors.shuosc.org/apache/hive/stable-2/">http://mirrors.shuosc.org/apache/hive/stable-2/</a>
</p></li>

<li><p>
zookeeper
</p>

<p>
ä¸‹è½½ç¨³å®šç‰ˆå³å¯
</p>

<p>
<a href="http://mirrors.shuosc.org/apache/zookeeper/stable/">http://mirrors.shuosc.org/apache/zookeeper/stable/</a>
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orgdca9702" class="outline-3">
<h3 id="orgdca9702">ç¯å¢ƒå‡†å¤‡</h3>
<div class="outline-text-3" id="text-orgdca9702">
<p>
ä¸‰å°vbox è™šæ‹Ÿcentos7 é…ç½® java scala ç¯å¢ƒ å…³é—­é˜²ç«å¢™å’Œselinux
</p>

<ul class="org-ul">
<li><p>
cluster
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">hostname</th>
<th scope="col" class="org-right">ip</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">master</td>
<td class="org-right">192.168.56.10</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">slave01</td>
<td class="org-right">192.168.56.11</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">slave02</td>
<td class="org-right">192.168.56.12</td>
</tr>
</tbody>
</table></li>

<li><p>
disable ipv6
</p>

<p>
sudo vi /etc/sysctl.conf
</p>

<p>
æ·»åŠ ä¸‹é¢å†…å®¹
</p>

<pre class="example">

# disable ipv6
net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.default.disable_ipv6 = 1
net.ipv6.conf.lo.disable_ipv6 = 1

</pre>

<p>
è§£å†³master:50070 é¡µé¢æ‰¾ä¸åˆ°live node 
</p>

<p>
è§£å†³ connection exception
</p>

<pre class="example">
17//23 23:19:48 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
ls:all From slave01/127.0.0.1 to master:9000 failed on connection exception: java.net.ConnectException: æ‹’ç»è¿æ¥; For more details see:  http://wiki.apache.org/hadoop/ConnectionRefused

</pre></li>

<li><p>
hostname &amp; host
ä¸‰å°ä¸»æœºéƒ½è¦
ä¿®æ”¹ä¸»æœºå
ä¿®æ”¹/etc/hosts äº’ç›¸æ·»åŠ hostnameè®¿é—®åˆ«å
æ³¨æ„ï¼› #127.0.0.1 master è¿™æ ·çš„æ˜ å°„ä¸€å®šè¦æ³¨é‡Šæ‰,master:8088æ— æ³•è®¿é—®æœ€ç»ˆå®šä½åˆ°è¿™é‡Œäº†
</p>
<pre class="example">
#ceos7 cluster
19268.56.10 master
19268.56.11 slave01
19268.56.12 slave02
</pre></li>

<li>å…ç™»å½•éªŒè¯
ssh-keygen -t rsa
ssh-copy-id -i ~/.ssh/id_rsa.pub manue1@slave01 
ssh-copy-id -i ~/.ssh/id_rsa.pub manue1@slave02 
ssh-copy-id -i ~/.ssh/id_rsa.pub manue1@master</li>

<li>download hadoop
tar -zxvf hadoop-2.7.5.tar.gz</li>
</ul>
</div>
</div>
<div id="outline-container-orgcb34b40" class="outline-3">
<h3 id="orgcb34b40">é…ç½®hadoop cluster</h3>
<div class="outline-text-3" id="text-orgcb34b40">
<ul class="org-ul">
<li><p>
hadoop_home
ä¸‰å°èŠ‚ç‚¹éƒ½éœ€è¦é…ç½®
vi .bashrc
</p>
<pre class="example">
# Hadoop Environment Variables
export HADOOP_HOME=/home/manue1/opt/hadoop-2.7.5
export HADOOP_INSTALL=$HADOOP_HOME
export HADOOP_MAPRED_HOME=$HADOOP_HOME
export HADOOP_COMMON_HOME=$HADOOP_HOME
export HADOOP_HDFS_HOME=$HADOOP_HOME
export YARN_HOME=$HADOOP_HOME
export HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_HOME/lib/native
export PATH=$PATH:$HADOOP_HOME/sbin:$HADOOP_HOME/bin
export HADOOP_OPTS="$HADOOP_OPTS -Djava.library.path=$HADOOP_HOME/lib/native" #è§£å†³WARN util.NativeCodeLoader: Unable to load native-hadoop library
export CATALINA_BASE=$HADOOP_HOME/share/hadoop/httpfs/tomcat #æ”¯æŒhttpfs rest api

</pre></li>

<li><p>
master
</p>

<p>
<i>home/manue1/opt/hadoop-2.7.5/etc/hadoop</i> ä¸‹6ä¸ªé…ç½®æ–‡ä»¶
</p>
<ol class="org-ol">
<li><p>
core-site.xml
</p>

<pre class="example">
&lt;configuration&gt;
    &lt;!-- æŒ‡å®šHDFSè€å¤§ï¼ˆnamenodeï¼‰çš„é€šä¿¡åœ°å€ --&gt;
    &lt;property&gt;
        &lt;name&gt;fs.defaultFS&lt;/name&gt;
        &lt;value&gt;hdfs://master:9000&lt;/value&gt;
    &lt;/property&gt;
    &lt;!-- æŒ‡å®šhadoopè¿è¡Œæ—¶äº§ç”Ÿæ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ --&gt;
    &lt;property&gt;
        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
        &lt;value&gt;file:/home/manue1/opt/hadoop-2.7.5/tmp&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
    &lt;!--å¼€å¯httpfså®ç°ä¸€ç§åŒ¿åçš„æ–¹å¼ç™»é™†hdfsæ–‡ä»¶ç³»ç»Ÿ ç«¯å£14000
        manue1ç”¨æˆ·ä¸ºhdfsçš„è¶…çº§ç”¨æˆ· hiveå¯åŠ¨ç”¨æˆ·
    --&gt;

    &lt;property&gt;
         &lt;name&gt;hadoop.proxyuser.manue1.hosts&lt;/name&gt;
         &lt;value&gt;*&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;hadoop.proxyuser.manue1.groups&lt;/name&gt;
        &lt;value&gt;*&lt;/value&gt;
    &lt;/property&gt;


</pre></li>

<li><p>
hdfs-site.xml
</p>

<pre class="example">
&lt;configuration&gt;
        &lt;!-- è®¾ç½®namenodeçš„httpé€šè®¯åœ°å€ --&gt;
        &lt;property&gt;
                &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;
                &lt;value&gt;master:50090&lt;/value&gt;
        &lt;/property&gt;
        &lt;!-- è®¾ç½®hdfså‰¯æœ¬æ•°é‡ --&gt;
        &lt;property&gt;
                &lt;name&gt;dfs.replication&lt;/name&gt;
                &lt;value&gt;1&lt;/value&gt;
        &lt;/property&gt;
         &lt;!-- è®¾ç½®namenodeå­˜æ”¾çš„è·¯å¾„ --&gt;
        &lt;property&gt;
                &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;
                &lt;value&gt;file:/home/manue1/opt/hadoop-2.7.5/tmp/dfs/name&lt;/value&gt;
        &lt;/property&gt;
         &lt;!-- è®¾ç½®datanodeå­˜æ”¾çš„è·¯å¾„ --&gt;
        &lt;property&gt;
                &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;
                &lt;value&gt;file:/home/manue1/opt/hadoop-2.7.5/tmp/dfs/data&lt;/value&gt;
        &lt;/property&gt;
&lt;/configuration&gt;


</pre></li>

<li><p>
mapred-site.xml
</p>

<p>
mv mapred-site.xml.template mapred-site.xml
</p>

<pre class="example">
&lt;configuration&gt;
        &lt;!-- é€šçŸ¥æ¡†æ¶MRä½¿ç”¨YARN --&gt;
        &lt;property&gt;
                &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
                &lt;value&gt;yarn&lt;/value&gt;
        &lt;/property&gt;
        &lt;property&gt;
                &lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;
                &lt;value&gt;master:10020&lt;/value&gt;
        &lt;/property&gt;
        &lt;property&gt;
                &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;
                &lt;value&gt;master:19888&lt;/value&gt;
        &lt;/property&gt;
&lt;/configuration&gt;

</pre></li>

<li><p>
yarn-site.xml
</p>

<pre class="example">
&lt;configuration&gt;
 &lt;!-- è®¾ç½® resourcemanager åœ¨å“ªä¸ªèŠ‚ç‚¹--&gt;
&lt;!-- Site specific YARN configuration properties --&gt;
        &lt;property&gt;
                &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;
                &lt;value&gt;master&lt;/value&gt;
        &lt;/property&gt;
         &lt;!-- reducerå–æ•°æ®çš„æ–¹å¼æ˜¯mapreduce_shuffle --&gt;
        &lt;property&gt;
                &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
                &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
        &lt;/property&gt;
        &lt;!--æ‰€æœ‰ä¸»æœºè®¿é—®yarnç®¡ç†ç•Œé¢--&gt;
        &lt;property&gt; 
                &lt;name&gt;yarn.resourcemanager.webapp.address&lt;/name&gt;
                &lt;value&gt;0.0.0.0:8088&lt;/value&gt;
        &lt;/property&gt;

&lt;/configuration&gt;

</pre></li>

<li><p>
slaves
</p>

<pre class="example">
slave01
slave02
</pre></li>

<li><p>
hadoop-env.sh
</p>

<p>
ä¿®æ”¹
export JAVA_HOME=/home/manue1/opt/jdk8
</p></li>
</ol></li>

<li><p>
slaves
</p>

<p>
tar -zcvf hadoop-2.7.5_conf_finshed.tar.gz hadoop-2.7.5/
</p>

<p>
scp hadoop-2.7.5_conf_finshed.tar.gz manue1@slave02:/home/manue1/opt/
</p></li>
</ul>
</div>
</div>
<div id="outline-container-orgac4e050" class="outline-3">
<h3 id="orgac4e050">å¯åŠ¨hadoop</h3>
<div class="outline-text-3" id="text-orgac4e050">
<p>
hdfs namenode -format #ç¬¬ä¸€æ¬¡å¯åŠ¨è¦æ‰§è¡Œæ ¼å¼åŒ–ï¼Œä¹‹åå¯åŠ¨ä¸ç”¨æ‰§è¡Œè¿™ä¸ª
start-dfs.sh
start-yarn.sh
mr-jobhistory-daemon.sh start historyserver  ??
httpfs.sh start
</p>


<ul class="org-ul">
<li><p>
master
</p>
<pre class="example">
manue1@master sbin]$ jps
2034 NameNode
2483 Jps
15754 Bootstrap  #httpfs
1652 ResourceManager
2188 SecondaryNameNode
2447 JobHistoryServer

</pre></li>

<li><p>
slaves
</p>
<pre class="example">
[manue1@slave01 hadoop]$ jps
1360 DataNode
1430 NodeManager
1516 Jps
</pre></li>
</ul>

<p>
hadoop clusterçŠ¶æ€å±•ç¤ºç•Œé¢ webhdfs
<a href="http://master:50070/">http://master:50070/</a>
curl "<a href="http://master:50070/webhdfs/v1/?op=liststatus&amp;user.name=manue1">http://master:50070/webhdfs/v1/?op=liststatus&amp;user.name=manue1</a>"
</p>

<p>
httpfs rest api é…ç½®HAçš„æ—¶å€™æ‰¾ä¸åˆ°namenodeå¯ä»¥é‡‡ç”¨httpfs
<a href="http://master:14000/">http://master:14000/</a>
curl "<a href="http://master:14000/webhdfs/v1/?op=liststatus&amp;user.name=manue1">http://master:14000/webhdfs/v1/?op=liststatus&amp;user.name=manue1</a>"
</p>

<p>
yarn ç®¡ç†ç•Œé¢
<a href="http://master:8088">http://master:8088</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org80ba43b" class="outline-2">
<h2 id="org80ba43b">elasticstk é›†ç¾¤</h2>
<div class="outline-text-2" id="text-org80ba43b">
</div>
<div id="outline-container-orge0a52dc" class="outline-3">
<h3 id="orge0a52dc">elasticsearch-611</h3>
<div class="outline-text-3" id="text-orge0a52dc">
<ol class="org-ol">
<li><p>
ç¯å¢ƒå‡†å¤‡
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">hostname</th>
<th scope="col" class="org-right">ip</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">master</td>
<td class="org-right">192.168.56.10</td>
<td class="org-left">masternode</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">slave01</td>
<td class="org-right">192.168.56.11</td>
<td class="org-left">datanode</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">slave02</td>
<td class="org-right">192.168.56.12</td>
<td class="org-left">datanode</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li><p>
ç”Ÿäº§ç¯å¢ƒé…ç½®: 
</p>

<p>
10èŠ‚ç‚¹ 6ä¸ªmasterå€™é€‰èŠ‚ç‚¹
</p>

<p>
1èŠ‚ç‚¹ 4G + lucene 3G = 8G
</p>

<p>
10Tç¡¬ç›˜ï¼Œæœ€å¤šå­˜5Tæ•°æ®
</p>

<p>
4c + 8g + 1T * 10å° = 10T 
4c + 16g + 2T * 5å° = 10T
</p></li>
</ul></li>
</ol>


<ul class="org-ul">
<li>java ç¯å¢ƒé…ç½®ï¼Œå…³é—­firewalld,ä¸»æœºåé…ç½®,å®˜ç½‘ä¸‹è½½elasticsearch-6.1.1.tar.gz</li>

<li>æ™®é€šç”¨æˆ·ä¸‹å®‰è£…es  username:manue1</li>

<li><p>
ç³»ç»Ÿè®¾ç½®
</p>

<p>
sudo -s åˆ‡æ¢åˆ°rootä¸‹æ‰§è¡Œ
</p>

<pre class="example">

sed -e '$a vm.max_map_count = 262144' -i /etc/sysctl.conf

sysctl -p



echo "ulimit -SHn 1048576" &gt;&gt; /etc/rc.local

sed -e '$a DefaultLimitCORE=infinity\nDefaultLimitNOFILE=1048576\nDefaultLimitNPROC=1048576' -i /etc/systemd/system.conf

cat &gt;&gt; /etc/security/limits.conf &lt;&lt; EOF

 *           soft   nofile       1048576

 *           hard   nofile       1048576

 *           soft   nproc        1048576

 *           hard   nproc        1048576

EOF

sed -i 's/4096/1048576/' /etc/security/limits.d/20-nproc.conf

sed -e '/root       soft    nproc     unlimited/a\*           soft   nofile       1048576\n*           hard   nofile       1048576' -i /etc/security/limits.d/20-nproc.conf

</pre>
<p>
ä¿®æ”¹ç³»ç»Ÿé…ç½®æ–‡ä»¶åï¼Œé‡å¯ç³»ç»Ÿç”Ÿæ•ˆ
</p></li>
</ul>
<ol class="org-ol">
<li><p>
é…ç½®elasticsearch
</p>

<ul class="org-ul">
<li><p>
elasticsearch.yml          # elsçš„é…ç½®æ–‡ä»¶
</p>
<pre class="example">
cluster.name: manue1-es-cluster  #é›†ç¾¤åç§°

node.name: master-node           #èŠ‚ç‚¹åç§°

node.data: false
node.master: true  #å»ºè®®ç›´æ¥ä¸è®¾ç½®ï¼Œé»˜è®¤ä¸¤ä¸ªéƒ½ä¸ºtrue.

path.data: /Home/Manue1/Opt/Elasticsearch-6.1.1/Els/Data  #æ•°æ®å­˜å‚¨ç›®å½•

path.logs: /home/manue1/opt/elasticsearch-6.1.1/els/log   #æ—¥å¿—å­˜å‚¨ç›®å½•

network.bind_host: 0.0.0.0   #í ½masterèŠ‚ç‚¹é…ç½® â€0.0.0.0â€ï¼Œå…è®¸æ‰€æœ‰ç½‘ç»œæ¥å£è®¿é—®
network.publish_host: master # é›†ç¾¤é€šä¿¡

gateway.recover_after_nodes: 3  #å€¼ä¸ºnï¼Œç½‘å…³æ§åˆ¶åœ¨nä¸ªèŠ‚ç‚¹å¯åŠ¨ä¹‹åæ‰æ¢å¤æ•´ä¸ªé›†ç¾¤, 3èŠ‚&gt;ç‚¹å¯åŠ¨å1åˆ†é’Ÿ
gateway.recover_after_time: 1m

indices.recovery.max_bytes_per_sec: 20mb  #æ¢å¤æ•°æ®æ—¶,é™åˆ¶çš„å®½å¸¦æµé‡,å¦‚æœæ˜¯0å°±æ˜¯æ— é™åˆ¶

node.max_local_storage_nodes: 1                  #å€¼ä¸ºnï¼Œä¸€ä¸ªç³»ç»Ÿä¸­æœ€å¤šå¯ç”¨èŠ‚ç‚¹ä¸ªæ•°ä¸ºn

http.port: 9200                 # å¯¹å¤–æä¾›æœåŠ¡çš„ç«¯å£ï¼Œ9300ä¸ºé›†ç¾¤æœåŠ¡çš„ç«¯å£


</pre></li>

<li><p>
jvm.options                # JVMç›¸å…³çš„é…ç½®ï¼Œå†…å­˜å¤§å°ç­‰ç­‰
</p>
<pre class="example">
-Xms128M
-Xmx128M

 -Xmx1gä¸-Xms1gJVMçš„æœ€å¤§æœ€å°å†…å­˜ã€‚å¦‚æœå¤ªå°ä¼šå¯¼è‡´Elasticsearchåˆšåˆšå¯åŠ¨å°±ç«‹åˆ»åœæ­¢ã€‚å¤ªå¤§ä¼šæ‹–æ…¢ç³»ç»Ÿæœ¬èº«
</pre></li>

<li>log4j2.properties          # æ—¥å¿—ç³»ç»Ÿå®šä¹‰</li>
</ul>

<p>
å°†é…ç½®å¥½çš„elasticsearch æ‰“åŒ…ä¼ åˆ°å„ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœé…ç½®è¿‡ç¨‹ä¸­è¿è¡Œäº§ç”Ÿçš„data/nodes/0 æ–‡ä»¶
ä¸€å®šè¦åˆ æ‰ï¼Œå†æ‰“åŒ…ä½¿ç”¨ï¼Œå¦åˆ™å„ä¸ªèŠ‚ç‚¹å¯åŠ¨æˆåŠŸäº†ï¼Œæ— æ³•åŠ å…¥åˆ°é›†ç¾¤ï¼ŒèŠ‚ç‚¹idå†²çª
</p>
<pre class="example">
with the same id but is a different node instance
</pre></li>

<li><p>
å¯åŠ¨elasticsearch
</p>

<p>
su â€“ manue1
</p>

<p>
vi  /home/manue1/opt/elasticsearch-6.1.1/bin/elasticsearch
</p>
<pre class="example">
ES_HEAP_SIZE=128m
MAX_OPEN_FILES=262144
</pre>

<p>
nohup ./bin/elasticsearch -d 
</p>

<p>
å…³é—­ ps -ef |grep elasticsearch|awk '{print $2}'|xargs kill -9
</p></li>

<li>refer
<a href="https://blog.csdn.net/thomas0yang/article/details/55518105#%E5%86%85%E5%AD%98">https://blog.csdn.net/thomas0yang/article/details/55518105#å†…å­˜</a>
<a href="https://www.elastic.co/guide/cn/elasticsearch/guide/cn/important-configuration-changes.html#_%E6%9C%80%E5%B0%8F%E4%B8%BB%E8%8A%82%E7%82%B9%E6%95%B0">https://www.elastic.co/guide/cn/elasticsearch/guide/cn/important-configuration-changes.html#_æœ€å°ä¸»èŠ‚ç‚¹æ•°</a>
<a href="https://zhuanlan.zhihu.com/p/35291900">https://zhuanlan.zhihu.com/p/35291900</a></li>
</ol>
</div>
</div>

<div id="outline-container-org17dae9c" class="outline-3">
<h3 id="org17dae9c">kibana</h3>
<div class="outline-text-3" id="text-org17dae9c">
<p>
é…ç½®åœ¨esçš„éæ•°æ®èŠ‚ç‚¹ä¸Š: 192.168.56.10
</p>

<p>
ä¿®æ”¹ config/kibana.yml
</p>
<pre class="example">
server.host: "0.0.0.0" #ä¸åŒç½‘å¡ç½‘æ®µèƒ½å¤Ÿè®¿é—®
elasticsearch.url: "http://master:9200"
</pre>

<p>
å¯åŠ¨ï¼š nohup  bin/kibana  &amp;
</p>

<p>
å…³é—­: ps -ef |grep kibana |awk '{print $2}'|xargs kill -9
</p>

<p>
ss -lnp | grep 5601
</p>
</div>
</div>

<div id="outline-container-orgd785476" class="outline-3">
<h3 id="orgd785476">logstash</h3>
<div class="outline-text-3" id="text-orgd785476">
<ol class="org-ol">
<li>download
logstash-6.1.1.tar.gz</li>
<li>config

<ul class="org-ul">
<li><p>
åˆ›å»ºlogstash-conf ç›®å½•
beatçš„é…ç½®æ–‡ä»¶
vi beats.conf
</p>
<pre class="example">
input {
  beats {
    port =&gt; 5044
  }
}

# The filter part of this file is commented out to indicate that it is
# optional.
# filter {
#
# }

output {
  elasticsearch {
    hosts =&gt; "master:9200"
    manage_template =&gt; false
    index =&gt; "%{[@metadata][beat]}-%{[@metadata][version]}-%{+YYYY.MM.dd}" 
  }
}

</pre></li>

<li>jvm.options
ä¿®æ”¹ xms xmx æœ€å¤§æœ€å°jvm ä¸º256M æ¯”esæµ‹è¯•é›†ç¾¤åƒå†…å­˜å¤š</li>

<li>logstash.yml</li>
</ul></li>

<li>start logstash

<ul class="org-ul">
<li>bin/logstash -e 'input { stdin { } } output { stdout {} }'
æµ‹è¯•å¯åŠ¨</li>

<li><p>
./bin/logstash -f logstash-conf/beats.conf &amp;
</p>

<p>
é…ç½®æ–‡ä»¶å¯åŠ¨
</p>

<p>
sudo netstat -anp | grep 5044
</p></li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-org80afdfc" class="outline-3">
<h3 id="org80afdfc">beats</h3>
<div class="outline-text-3" id="text-org80afdfc">
</div>
<div id="outline-container-orgc9acd21" class="outline-4">
<h4 id="orgc9acd21">topbeat</h4>
<div class="outline-text-4" id="text-orgc9acd21">
<p>
5.xç‰ˆæœ¬åå¼ƒç”¨äº†
</p>
<ol class="org-ol">
<li>ä¸‹è½½
topbeat-1.3.1-x86_64.tar.gz</li>

<li>é…ç½®

<ul class="org-ul">
<li>topbeat</li>

<li>topbeat.template.json  
topbeatè‡ªå¸¦çš„æ¨¡ç‰ˆï¼Œç”¨æ¥åˆ›å»ºå­˜æ”¾æ”¶é›†æ•°æ®çš„ç´¢å¼•ç»“æ„</li>

<li><p>
topbeat.yml
</p>
<pre class="example">
input:
  period: 10           #é»˜è®¤10ç§’æ”¶é›†ä¸€æ¬¡
  procs: [".*"]   #å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼ï¼Œä»¥åŒ¹é…ä½ æ‰€è¦ç›‘æ§çš„è¿›ç¨‹ã€‚é»˜è®¤æ˜¯æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹éƒ½è¿›è¡Œç›‘æ§ã€‚
  stats:
    system: true
    proc: true
    filesystem: true
output:
  elasticsearch:
    hosts: ["master:9200"]
shipper:
logging:
  files:
</pre></li>
</ul></li>
</ol>


<ol class="org-ol">
<li>eså¯¼å…¥æ¨¡ç‰ˆ
å¯¼å…¥topbeatè‡ªå¸¦çš„æ¨¡ç‰ˆï¼Œç”¨æ¥åˆ›å»ºå­˜æ”¾æ”¶é›†æ•°æ®çš„ç´¢å¼•ç»“æ„

<ul class="org-ul">
<li><p>
Configuring Template Loading - supported for Elasticsearch output only
</p>
<pre class="example">
ERR Failed to perform any bulk index operations: 406 Not Acceptable
é”™è¯¯åº”è¯¥æ˜¯æ¨¡ç‰ˆå’Œ6.0ç‰ˆæœ¬ä¸åŒ¹é…äº†ï¼Œå®˜ç½‘æ²¡æœ‰æ›´æ–°
å†å»å®˜ç½‘æŸ¥çœ‹ï¼Œtopbeat ä»5.0 å·²ç»è¢« Metricbeatæ›¿æ¢äº†
</pre></li>

<li>Loading the Template Manually - required for Logstash output</li>
</ul></li>
</ol>


<ol class="org-ol">
<li>kibana</li>

<li><p>
å¯åŠ¨topbeatèŠ‚ç‚¹
</p>

<p>
sudo ./topbeat -e -c topbeat.yml -d "publish"
</p></li>
</ol>
</div>
</div>
<div id="outline-container-orgfab81b4" class="outline-4">
<h4 id="orgfab81b4">filebeat</h4>
<div class="outline-text-4" id="text-orgfab81b4">
<ol class="org-ol">
<li><p>
download
</p>

<p>
filebeat-6.1.1-linux-x86_64.tar.gz
</p>

<p>
<a href="https://download.elastic.co/demos/logstash/gettingstarted/logstash-tutorial.log.gz">https://download.elastic.co/demos/logstash/gettingstarted/logstash-tutorial.log.gz</a>
logstash-tutorial.log.gz apache çš„æ—¥å¿—æ–‡ä»¶æ ·æœ¬
</p></li>

<li>config

<ul class="org-ul">
<li><p>
filebeat.yml
</p>
<pre class="example">
- type: log
  # Change to true to enable this prospector configuration.
  enabled: true
  # Paths that should be crawled and fetched. Glob based paths.
  paths:
    - /var/log/*.log
    - /home/manue1/opt/source/*.log
    #- c:\programdata\elasticsearch\logs\*


output.logstash:
  # The Logstash hosts
  hosts: ["master:5044"]


setup.kibana:

  host: "master:5601"         

</pre></li>

<li><p>
modules
</p>

<p>
sudo chown -R root /home/manue1/opt/filebeat-6.1.1-linux-x86_64/module
</p>

<p>
sudo chown -R root /home/manue1/opt/filebeat-6.1.1-linux-x86_64/modules.d
</p>

<ul class="org-ul">
<li><p>
Enable modules when you run Filebeatedit
</p>

<p>
sudo ./filebeat -e &#x2013;modules system,nginx,mysql  
</p>

<p>
./filebeat -e &#x2013;modules nginx -M "nginx.access.var.paths=[/var/log/nginx/access.log*]"
</p></li>

<li><p>
filebeat.yml
</p>

<p>
sudo ./filebeat modules list
</p>

<p>
sudo ./filebeat modules enable system 
</p>

<pre class="example">
é»˜è®¤é…ç½®è¯»å–æ‰€æœ‰enable
filebeat.modules:
- module: nginx
- module: mysql
- module: system

</pre></li>
</ul></li>
</ul></li>
</ol>





<ul class="org-ul">
<li><p>
setup template
</p>

<p>
for logstash manually setup
</p>
<pre class="example">
./filebeat setup --template -E output.logstash.enabled=false -E 'output.elasticsearch.hosts=["localhost:9200"]'
</pre></li>

<li><p>
setup kibana dashboards
</p>

<pre class="example">
./filebeat setup --dashboards
</pre></li>

<li><p>
start filebeat
</p>

<p>
sudo chown root filebeat.yml 
</p>

<p>
sudo -s
</p>

<p>
nohup /home/manue1/opt/filebeat-6.1.1-linux-x86_64/filebeat -e -c /home/manue1/opt/filebeat-6.1.1-linux-x86_64/filebeat.yml -d "publish" &amp;
</p>

<p>
ps aux |grep beat
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org14c55fc" class="outline-4">
<h4 id="org14c55fc">metricbeat</h4>
<div class="outline-text-4" id="text-org14c55fc">
<ol class="org-ol">
<li><p>
download
</p>

<p>
metricbeat-6.1.1-linux-x86_64.tar.gz
</p></li>

<li>conf

<ul class="org-ul">
<li>metricbeat.yml

<ol class="org-ol">
<li><p>
ä¿®æ”¹eså’Œkibanaçš„åœ°å€
</p>

<p>
å¦‚æœè¾“å‡ºåˆ°logstashä¸­ï¼Œéœ€è¦å…³é—­ç›´æ¥å†™å…¥esï¼Œå¹¶é…ç½®logstashç›‘å¬5044ç«¯å£
esä¹Ÿè¦æ‰‹åŠ¨åŠ è½½template
</p>
<pre class="example">
output.logstash:
  # The Logstash hosts
  hosts: ["master:5044"]
</pre></li>

<li>é…ç½®templateæ¨¡ç‰ˆ
<ul class="org-ul">
<li>Configure template loading</li>
<li><p>
Load the template manually  
required for Logstash output
</p>
<pre class="example">

sudo ./metricbeat setup --template -E output.logstash.enabled=false -E 'output.elasticsearch.hosts=["master:9200"]'
</pre></li>
</ul></li>
</ol></li>
</ul></li>
</ol>


<ul class="org-ul">
<li>modules.d 
ç›®å½•ä¸‹é¢å¯ä»¥é…ç½®å¤šç§æ¨¡å—
ä¿®æ”¹ logstash.yml.disabled ä¸º logstash.yml å¯åŠ¨æ¨¡å—</li>

<li><p>
kibana dashboard
</p>

<p>
./metricbeat setup &#x2013;dashboards
</p></li>
</ul>
<ol class="org-ol">
<li><p>
start 
</p>

<p>
sudo chown root metricbeat.yml 
sudo chown root modules.d/system.yml 
sudo ./metricbeat -e -c metricbeat.yml -d "publish"
</p>

<p>
ps aux |grep metricbeat
</p></li>
</ol>


<p>
å¤åˆ¶åˆ°ä¸åŒèŠ‚ç‚¹éƒ¨ç½²
</p>
</div>
</div>
<div id="outline-container-org16228de" class="outline-4">
<h4 id="org16228de">packetbeat</h4>
<div class="outline-text-4" id="text-org16228de">
<ol class="org-ol">
<li><p>
download 
</p>

<p>
packetbeat-6.1.1-linux-x86_64.tar.gz
</p></li>

<li>config 

<ul class="org-ul">
<li><p>
packetbeat.yml
</p>

<p>
logstash &amp; kibana åœ°å€ä¿®æ”¹
</p></li>

<li><p>
setup template
</p>

<p>
./packetbeat setup &#x2013;template -E output.logstash.enabled=false -E 'output.elasticsearch.hosts=["master:9200"]'
</p></li>

<li><p>
set up kibana dashboard
</p>

<p>
./packetbeat setup &#x2013;dashboards
</p></li>
</ul></li>

<li><p>
start beat
</p>

<p>
sudo chown root packetbeat.yml 
</p>

<p>
nohup /home/manue1/opt/packetbeat-6.1.1-linux-x86_64/packetbeat -e -c  /home/manue1/opt/packetbeat-6.1.1-linux-x86_64/packetbeat.yml -d "publish" &amp;
</p></li>
</ol>
</div>
</div>
</div>
</div>

<div id="outline-container-org3c3a410" class="outline-2">
<h2 id="org3c3a410">hive</h2>
<div class="outline-text-2" id="text-org3c3a410">
<p>
hadoop namenodeä¸Šå®‰è£…,datanodeä¸Šæ— éœ€å®‰è£…
</p>

<ol class="org-ol">
<li><p>
download install
</p>

<p>
hive
</p>

<p>
<a href="http://mirrors.shuosc.org/apache/hive/stable-2/">http://mirrors.shuosc.org/apache/hive/stable-2/</a>
</p>

<ul class="org-ul">
<li><p>
mysql 
</p>

<p>
refer: <a href="http://blog.csdn.net/Nemo____/article/details/72897455">http://blog.csdn.net/Nemo____/article/details/72897455</a>
</p>
<ul class="org-ul">
<li>remove mariadb
rpm -qa|grep mariadb         //æŸ¥è¯¢å‡ºå·²å®‰è£…çš„mariadb
rpm -e &#x2013;nodeps æ–‡ä»¶å      //å¸è½½ ï¼Œ æ–‡ä»¶åä¸ºä½¿ç”¨rpm -qa|grep mariadb å‘½ä»¤æŸ¥å‡ºçš„æ‰€æœ‰æ–‡ä»¶
sudo  rpm -e &#x2013;nodeps mariadb-libscc</li>

<li><p>
install mariadb
</p>

<p>
<a href="https://www.cnblogs.com/starof/p/4680083.html">https://www.cnblogs.com/starof/p/4680083.html</a> 
</p>

<p>
yum install mariadb-server mariadb
</p>

<p>
systemctl start mariadb  #å¯åŠ¨MariaDB
</p>

<p>
systemctl stop mariadb  #åœæ­¢MariaDB
</p>

<p>
systemctl restart mariadb  #é‡å¯MariaDB
</p>

<p>
systemctl enable mariadb  #è®¾ç½®å¼€æœºå¯åŠ¨
</p>

<p>
mysql -uroot -p #NO PASSWORD
</p>

<p>
set password for 'root'@'localhost' =password('manue1');  # set new password
</p>

<p>
grant all privileges on <b>.</b> to root@'%'identified by 'manue1';  #è¿œç¨‹è¿æ¥è®¾ç½®
</p>

<p>
vi /etc/my.cnf
</p>
<pre class="example">
 # set utf8
[mysql]
default-character-set=utf8  # NO SPACE
</pre></li>
</ul></li>
</ul></li>

<li><p>
config
</p>

<p>
<a href="https://cwiki.apache.org/confluence/display/Hive/GettingStarted">https://cwiki.apache.org/confluence/display/Hive/GettingStarted</a>
</p>

<p>
<a href="http://blog.csdn.net/jssg_tzw/article/details/72354470">http://blog.csdn.net/jssg_tzw/article/details/72354470</a>
</p>

<ul class="org-ul">
<li><p>
vi .bashrc
</p>
<pre class="example">
# Hive Environment Variables
export HIVE_HOME=/home/manue1/opt/apache-hive-2.3.2-bin
PATH=$JAVA_HOME/bin:$HADOOP_HOME/bin:$HBASE_HOME/bin:$HIVE_HOME/bin:$PATH
</pre></li>

<li><p>
metastore conf
</p>

<pre class="example">
mysql -h slave01 -uroot -p

insert into mysql.user (Host,User,Password)values('localhost','hive',password('manue1'));

create database hive;

grant all privileges on hive.* to hive@'%'identified by 'manue1'; 

flush privileges; 


</pre></li>

<li><p>
hive-site.xml
</p>

<p>
mv hive-default.xml hive-site.xml
</p>

<ol class="org-ol">
<li><p>
hdfsæ–°å»ºç›®å½•
</p>
<pre class="example">
 &lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;
 &lt;value&gt;/user/hive/warehouse&lt;/value&gt;
 &lt;name&gt;hive.exec.scratchdir&lt;/name&gt;
&lt;value&gt;/tmp/hive&lt;/value&gt;


 æ‰€ä»¥è¦åœ¨Hadoopé›†ç¾¤æ–°å»º/user/hive/warehouseç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤

[manue1@master conf]$ hadoop fs -mkdir -p /user/hive/warehouse
[manue1@master conf]$ hadoop fs -chmod -R 777 /user/hive/warehouse
[manue1@master conf]$ hadoop fs -mkdir -p /tmp/hive
[manue1@master conf]$ hadoop fs -chmod -R 777 /tmp/hive
</pre></li>

<li><p>
mysqlç›¸å…³é…ç½®
</p>

<p>
<a href="https://dev.mysql.com/downloads/connector/j/5.1.html">https://dev.mysql.com/downloads/connector/j/5.1.html</a> download
</p>

<p>
mv mysql-connector-java-5.1.45-bin.jar lib/
</p>

<pre class="example">

1. javax.jdo.option.ConnectionDriverNameï¼Œå°†è¯¥nameå¯¹åº”çš„valueä¿®æ”¹ä¸ºMySQLé©±åŠ¨ç±»è·¯å¾„ï¼š
&lt;property
  &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;
  &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;
&lt;/property&gt;  

2. javax.jdo.option.ConnectionURLï¼Œå°†è¯¥nameå¯¹åº”çš„valueä¿®æ”¹ä¸ºMySQLçš„åœ°å€ï¼š
 &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;
 &lt;value&gt;jdbc:mysql://192.168.56.101:3306/hive?createDatabaseIfNotExist=true&lt;/value&gt;

3.javax.jdo.option.ConnectionUserNameï¼Œå°†å¯¹åº”çš„valueä¿®æ”¹ä¸ºMySQLæ•°æ®åº“ç™»å½•åï¼š
&lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;
&lt;value&gt;hive&lt;/value&gt;

4.javax.jdo.option.ConnectionPasswordï¼Œå°†å¯¹åº”çš„valueä¿®æ”¹ä¸ºMySQLæ•°æ®åº“çš„ç™»å½•å¯†ç ï¼š
&lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;
&lt;value&gt;*******&lt;/value&gt;

</pre>

<p>
å¯¹mysqlåˆå§‹åŒ–
</p>

<p>
schematool -initSchema -dbType mysql
</p></li>

<li><p>
æ›¿æ¢${system
</p>

<p>
${system:java.io.tmpdir}æ›¿æ¢ä¸ºhiveçš„ä¸´æ—¶ç›®å½•
/home/manue1/opt/apache-hive-2.3.2-bin/iotmp
</p>

<p>
${system:user.name}éƒ½æ›¿æ¢ä¸ºmanue1
</p>

<pre class="example">
[manue1@master apache-hive-2.3.2-bin]$ mkdir iotmp
[manue1@master apache-hive-2.3.2-bin]$ sudo chmod -R 777 iotmp

:%s/${system:java.io.tmpdir}/\/home\/manue1\/opt\/apache-hive-2.3.2-bin\/iotmp/gg

:%s/${system:user.name}/manue1/gg
</pre></li>
</ol></li>

<li><p>
hive-env.sh
</p>

<p>
mv hive-env.sh.template hive-env.sh
</p>

<pre class="example">
export HADOOP_HOME=/home/manue1/opt/hadoop-2.7.5

export HIVE_CONF_DIR=/home/manue1/opt/apache-hive-2.3.2-bin/conf

export HIVE_AUX_JARS_PATH=/home/manue1/opt/apache-hive-2.3.2-bin/lib

</pre></li>
</ul></li>

<li><p>
start hive
</p>

<p>
hive &#x2013;service hiveserver2 &amp;
</p>

<p>
netstat -anp | grep 10000
</p>

<p>
beeline æµ‹è¯•jdbcè¿æ¥
</p>

<p>
beeline -u jdbc:hive2://master:10000 -n manue1 -p mmanue1
</p>

<pre class="example">

     bin/beeline
     !connect jdbc:hive2://master:10000
 hdfsæ”¯æŒçš„ç”¨æˆ· 
Enter username for jdbc:hive2://master:10000: manue1
Enter password for jdbc:hive2://master:10000: *****

</pre>

<pre class="example">

Connecting to jdbc:hive2://master:10000/default
18/01/10 20:37:17 [main]: WARN jdbc.HiveConnection: Failed to connect to master:10000
Error: Could not open client transport with JDBC Uri: jdbc:hive2://master:10000/default: Failed to open new session: java.lang.RuntimeException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.security.authorize.AuthorizationException): User: manue1 is not allowed to impersonate anonymous (state=08S01,code=0)
Beeline version 2.3.2 by Apache Hive
beeline&gt; 

åˆ†æ ï¼š è®¿é—®æƒé™é—®é¢˜

è§£å†³ ï¼šåœ¨hdfs çš„é…ç½®æ–‡ä»¶core-site.xmlä¸­åŠ å…¥å¦‚ä¸‹é…ç½®ï¼Œroot ä¸ºä½ç½®å¡«å…¥  User:*  ï¼Œetc   hadoop.proxyuser.eamon.hosts

&lt;property&gt;
  &lt;name&gt;hadoop.proxyuser.manue1.hosts&lt;/name&gt;
  &lt;value&gt;*&lt;/value&gt;
 &lt;/property&gt;
 &lt;property&gt;
  &lt;name&gt;hadoop.proxyuser.manue1.groups&lt;/name&gt;
  &lt;value&gt;*&lt;/value&gt;
&lt;/property&gt;


</pre></li>
</ol>
</div>
</div>
<div id="outline-container-orgec8fd94" class="outline-2">
<h2 id="orgec8fd94">zookeeper</h2>
<div class="outline-text-2" id="text-orgec8fd94">
</div>
<div id="outline-container-org558dea5" class="outline-3">
<h3 id="org558dea5">Replicated ZooKeeper configural</h3>
<div class="outline-text-3" id="text-org558dea5">
<pre class="example">
note

For replicated mode, a minimum of three servers are required, and it is strongly recommended that you have an odd number of servers. If you only have two servers, then you are in a situation where if one of them fails, there are not enough machines to form a majority quorum. Two servers is inherently less stable than a single server, because there are two single points of failure.

  è‡³å°‘3èŠ‚ç‚¹,æ¯ä¸ªzookeeperæœåŠ¡éƒ½å¯ä»¥æˆä¸ºleaderï¼Œ followerï¼Œobserverã€‚
</pre>

<ul class="org-ul">
<li><p>
vi conf/zoo.cfg
</p>

<p>
sudo mkdir -p <i>var/lib/zookeeper
sudo chown manue1:manue1  /var/lib/zookeeper</i> #manue1 user start service
åˆ›å»º vi /var/lib/zookeeper/myid å†…å®¹ä¸ºnode server.x ,å¦‚ masterä¸º1
</p>

<pre class="example">

tickTime=2000
dataDir=/var/lib/zookeeper
clientPort=2181
initLimit=5
syncLimit=2
server.1=master:2888:3888   #2888 é›†ç¾¤äº’ç›¸é€šä¿¡ 3888 leaderé€‰ä¸¾
server.2=slave01:2888:3888
server.3=slave02:2888:3888

# ï¼Œç«¯å£ 2181 ç”± ZooKeeper å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œç”¨äºè¿æ¥åˆ° ZooKeeper æœåŠ¡å™¨ï¼›ç«¯å£ 2888 ç”±å¯¹ç­‰ ZooKeeper æœåŠ¡å™¨ä½¿ç”¨ï¼Œç”¨äºäº’ç›¸é€šä¿¡ï¼›è€Œç«¯å£ 3888 ç”¨äºé¢†å¯¼è€…é€‰ä¸¾

</pre>
<p>
scp -r zookeeper-3.4.10 manue1@slave01:/home/manue1/opt
scp -r zookeeper-3.4.10 manue1@slave02:/home/manue1/opt
</p></li>

<li><p>
start service
</p>

<p>
nohup /home/manue1/opt/zookeeper-3.4.10/bin/zkServer.sh restart
</p>

<p>
ps -ef | grep zookeeper
</p>

<p>
netstat -tnlpa | grep 2181 
</p>

<p>
echo state | nc localhost 2181
</p></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org06a6e74" class="outline-2">
<h2 id="org06a6e74">hbase</h2>
<div class="outline-text-2" id="text-org06a6e74">
<p>
start hadoop &amp; zookeeper
</p>
</div>
<div id="outline-container-orgba681af" class="outline-3">
<h3 id="orgba681af">hbase configural</h3>
<div class="outline-text-3" id="text-orgba681af">
<ul class="org-ul">
<li><p>
.bashrc
</p>

<pre class="example">
# Hbase Environment Variables
export HBASE_HOME=/home/manue1/opt/hbase-1.2.6/
PATH=$JAVA_HOME/bin:$HADOOP_HOME/bin:$HBASE_HOME/bin:$PATH



</pre></li>

<li><p>
hbase-env.sh
</p>
<pre class="example">
export JAVA_HOME=/home/manue1/opt/jdk8
export HBASE_MANAGES_ZK=false

</pre></li>

<li>hbase-site.xml</li>

<li><p>
regionservers
</p>
<pre class="example">
master
slave01
slave02
</pre></li>
</ul>
</div>
</div>


<div id="outline-container-org05fdebf" class="outline-3">
<h3 id="org05fdebf">hbase start</h3>
<div class="outline-text-3" id="text-org05fdebf">
<p>
nohup /home/manue1/opt/hbase-1.2.6/bin/start-hbase.sh &amp;
</p>

<p>
nohup /home/manue1/opt/hbase-1.2.6/bin/stop-hbase.sh &amp;
</p>


<p>
<a href="http://master:16010/master-status">http://master:16010/master-status</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgd915e4c" class="outline-2">
<h2 id="orgd915e4c">kafka</h2>
<div class="outline-text-2" id="text-orgd915e4c">
</div>
<div id="outline-container-orga5d1c11" class="outline-3">
<h3 id="orga5d1c11">kafka configural</h3>
<div class="outline-text-3" id="text-orga5d1c11">
<ul class="org-ul">
<li><p>
conf/server.properties
</p>

<pre class="example">
#æŒ‡å®šzookeeperçš„è¿æ¥ä¿¡æ¯
zookeeper.connect=master:2181,slave01:2181,slave02:2181

#æ¯ä¸ªbrokerç›¸å½“äºä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ³¨æ„å„ä¸ªèŠ‚ç‚¹çš„broker.idçš„å€¼å¿…é¡»å”¯ä¸€
broker.id=0

#brokerç›‘å¬ç«¯å£
listeners=PLAINTEXT://master:9092

log.dir=/var/log/kafka
</pre>
<p>
sudo mkdir -p /var/log/kafka  
sudo chown manue1:manue1 /var/log/kafka
</p>

<p>
scp -r kafka_2.11-1.0.0/ manue1@slave01:/home/manue1/opt
scp -r kafka_2.11-1.0.0/ manue1@slave02:/home/manue1/opt
å„ä¸ªèŠ‚ç‚¹ä¿®æ”¹broker.id å’Œ listeners
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orgfbc90a1" class="outline-3">
<h3 id="orgfbc90a1">kafka start service</h3>
<div class="outline-text-3" id="text-orgfbc90a1">
<ul class="org-ul">
<li><p>
vi .bashrc
</p>
<pre class="example">
# KAFKA_HOME Environment Variables
export KAFKA_HOME=/home/manue1/opt/kafka_2.11-1.0.0
export PATH=$PATH:$KAFKA_HOME/bin

</pre></li>
</ul>


<p>
nohup  $KAFKA_HOME/bin/kafka-server-start.sh $KAFKA_HOME/config/server.properties &amp;
</p>

<p>
$KAFKA_HOME/bin/kafka-server-stop.sh
</p>
<pre class="example">

   è™šæ‹Ÿæœºç¯å¢ƒå†…å­˜ä¸å¤Ÿï¼Œé…ç½®å¯åŠ¨è„šæœ¬ jvm heap å¤§å° 

[manue1@slave01 config]$ $KAFKA_HOME/bin/kafka-server-start.sh $KAFKA_HOME/config/server.propertie
Java HotSpot(TM) 64-Bit Server VM warning: INFO: os::commit_memory(0x00000000c0000000, 1073741824, 0) failed; error='Cannot allocate memory' (errno=12)


vi kafka-server-start.sh

KAFKA_HEAP_OPTS="-Xmx256M -Xms128M
</pre>

<p>
sudo netstat -anp | grep 9092
</p>
</div>
</div>
<div id="outline-container-orgb417a3d" class="outline-3">
<h3 id="orgb417a3d">use kafka</h3>
<div class="outline-text-3" id="text-orgb417a3d">
<p>
<a href="http://blog.csdn.net/u010297957/article/details/72758765">http://blog.csdn.net/u010297957/article/details/72758765</a>
</p>

<p>
producer &amp; consumer
</p>
<pre class="example">

[manue1@master ~]$ $KAFKA_HOME/bin/kafka-topics.sh --create --topic TestTopic001 --partitions 2 --replication-factor 1 --zookeeper master:2181,slave01:2181,slave02:2181
Created topic "TestTopic001".

[manue1@master ~]$ $KAFKA_HOME/bin/kafka-topics.sh --describe --topic TestTopic001 --zookeeper master:2181,slave01:2181,slave02:2181
Topic:TestTopic001	PartitionCount:2	ReplicationFactor:1	Configs:
    Topic: TestTopic001	Partition: 0	Leader: 1	Replicas: 1	Isr: 1
    Topic: TestTopic001	Partition: 1	Leader: 2	Replicas: 2	Isr: 2

[manue1@master logs]$ $KAFKA_HOME/bin/kafka-console-producer.sh --broker-list master:9092,slave01:9092,slave02:9092 --topic TestTopic001
&gt;hi zbr
&gt;what is your name
&gt;i love zbr


[manue1@slave01 kafka_2.11-1.0.0]$ $KAFKA_HOME/bin/kafka-console-consumer.sh --from-beginning --topic TestTopic001 --zookeeper master:2181,slave01:2181,slave02:2181
Using the ConsoleConsumer with old consumer is deprecated and will be removed in a future major release. Consider using the new consumer by passing [bootstrap-server] instead of [zookeeper].
hi zbr
what is your name
i love zbr

</pre>
</div>
</div>
</div>
<div id="outline-container-org9717966" class="outline-2">
<h2 id="org9717966">spark</h2>
<div class="outline-text-2" id="text-org9717966">
</div>
<div id="outline-container-orgd668a34" class="outline-3">
<h3 id="orgd668a34">spark configural</h3>
<div class="outline-text-3" id="text-orgd668a34">
<p>
<a href="https://data-flair.training/blogs/install-apache-spark-multi-node-cluster/">https://data-flair.training/blogs/install-apache-spark-multi-node-cluster/</a>
</p>


<ul class="org-ul">
<li><p>
.bashrc
</p>
<pre class="example">
#SPARK_HOME Environment Variables
export SPARK_HOME=/home/manue1/opt/spark-2.2.1-bin-hadoop2.7
export PATH=$PATH:$SPARK_HOME/bin
</pre></li>
</ul>


<ul class="org-ul">
<li><p>
spark-env.sh
</p>

<p>
cp spark-env.sh.template spark-env.sh
</p>

<pre class="example">
export JAVA_HOME=/home/manue1/opt/jdk8

export SCALA_HOME=/home/manue1/opt/scala-2.11.7

export HADOOP_HOME=/home/manue1/opt/hadoop-2.7.5

export HADOOP_CONF_DIR=/home/manue1/opt/hadoop-2.7.5/etc/hadoop

export SPARK_MASTER_IP=master

export SPARK_WORKER_MEMORY=64m

export SPARK_WORKER_CORES=1

export SPARK_WORKER_INSTANCES=2

å˜é‡è¯´æ˜
JAVA_HOMEï¼šJavaå®‰è£…ç›®å½•
SCALA_HOMEï¼šScalaå®‰è£…ç›®å½•
HADOOP_HOMEï¼šhadoopå®‰è£…ç›®å½•
HADOOP_CONF_DIRï¼šhadoopé›†ç¾¤çš„é…ç½®æ–‡ä»¶çš„ç›®å½•
SPARK_MASTER_IPï¼šsparké›†ç¾¤çš„MasterèŠ‚ç‚¹çš„ipåœ°å€
SPARK_WORKER_MEMORYï¼šæ¯ä¸ªworkerèŠ‚ç‚¹èƒ½å¤Ÿæœ€å¤§åˆ†é…ç»™exectorsçš„å†…å­˜å¤§å°
SPARK_WORKER_CORESï¼šæ¯ä¸ªworkerèŠ‚ç‚¹æ‰€å æœ‰çš„CPUæ ¸æ•°ç›®
SPARK_WORKER_INSTANCESï¼šæ¯å°æœºå™¨ä¸Šå¼€å¯çš„workerèŠ‚ç‚¹çš„æ•°ç›®

</pre></li>
</ul>


<ul class="org-ul">
<li><p>
slaves
</p>
<pre class="example">
master
slave01
slave02
</pre></li>
</ul>


<p>
slave sync
</p>

<p>
scp -r spark-2.2.1-bin-hadoop2.7/ manue1@192.168.1.109:/home/manue1/opt
</p>
</div>
</div>
<div id="outline-container-org25c94ea" class="outline-3">
<h3 id="org25c94ea">spark start</h3>
<div class="outline-text-3" id="text-org25c94ea">
<p>
nohup sh /home/manue1/opt/hadoop-2.7.5/sbin/start-all.sh &amp;  #å¯åŠ¨hdfså³å¯
</p>

<p>
$SPARK_HOME/sbin/start-all.sh
</p>


<p>
WebUI
<a href="http://master:8080/">http://master:8080/</a>
</p>

<p>
spark-shell.sh è¿è¡Œåå¯ä»¥è®¿é—®åå°æ‰§è¡Œçš„ä»»åŠ¡
<a href="http://master:4040/">http://master:4040/</a>
</p>

<p>
spark-submit yarn ç®¡ç†æ–¹å¼
<a href="http://master:8088/">http://master:8088/</a>
</p>
</div>
</div>
</div>
</div>
</body>
</html>