#+TITLE: mysql note
* note-Mysql
** install mysql
   1. æ£€æŸ¥ç³»ç»Ÿä¸­æ˜¯å¦å·²ç»å®‰è£…äº† mysql

     sudo netstat -tap | grep mysql

     æ²¡æœ‰ååº” è¯´æ˜æ²¡æœ‰å®‰è£…

   2. å®‰è£… mysql

     sudo apt-get install mysql-server mysql-client

   3. æµ‹è¯•å®‰è£…

     sudo netstat -tap | grep mysql

     mysql -u root -p 

   4. mysql ç®€å•ç®¡ç†

     å¯åŠ¨ MySQL æœåŠ¡ï¼š

     sudo service mysql start

     åœæ­¢ MySQL æœåŠ¡ï¼š

     sudo stop mysql

     ä¿®æ”¹ MySQL çš„ç®¡ç†å‘˜å¯†ç ï¼š

     sudo mysqladmin -u root password newpassword


   5. mysql ç›®å½•ç»“æ„

     æ•°æ®åº“å­˜æ”¾ç›®å½•ï¼š               /var/lib/mysql/

     ç›¸å…³é…ç½®æ–‡ä»¶å­˜æ”¾ç›®å½•ï¼š          /usr/share/mysql

     ç›¸å…³å‘½ä»¤å­˜æ”¾ç›®å½•ï¼š             /usr/bin(mysqladmin mysqldump ç­‰å‘½ä»¤)

     å¯åŠ¨è„šæ­¥å­˜æ”¾ç›®å½•ï¼š            /etc/rc.d/init.d/


   7. å¸¸è§é—®é¢˜

      * åˆ é™¤ä¸æ‰æ•°æ®åº“

         mysql> drop database elvdou;
         #+BEGIN_SRC 
          ERROR 1010 (HY000): Error dropping database (can't rmdir './elvdou', errno: 39)
         #+END_SRC
      * è®¾ç½®è¿œç¨‹è®¿é—®
        #+BEGIN_VERSE
        æ­£å¸¸æƒ…å†µä¸‹,mysqlå ç”¨çš„3306ç«¯å£åªæ˜¯åœ¨127.0.0.1ä¸Šç›‘å¬ï¼Œ
        æ‹’ç»äº†å…¶ä»–IPçš„è®¿é—®(é€šè¿‡netstatå¯ä»¥æŸ¥çœ‹åˆ°)ã€‚
        å–æ¶ˆæœ¬åœ°ç›‘å¬éœ€è¦ä¿®æ”¹ my.cnf æ–‡ä»¶ï¼š    
        sudo vi /etc/mysql/my.cnf
        bind-address = 127.0.0.1 //æ‰¾åˆ°æ­¤å†…å®¹å¹¶ä¸”æ³¨é‡Š
        #+END_VERSE
      * mysql å¤§å°å†™æ•æ„Ÿé—®é¢˜

        sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf 

        åœ¨[mysqld]èŠ‚ä¸‹ æ·»åŠ 
        #+BEGIN_SRC 
          lower_case_table_names=1 
        #+END_SRC

        å¤‡æ³¨ï¼šä¸º 0 æ—¶å¤§å°å†™æ•æ„Ÿï¼Œä¸º 1 æ—¶å¤§å°å†™ä¸æ•æ„Ÿï¼Œé»˜è®¤ä¸º 0

** install for mac
   #+BEGIN_QUOTE

   brew install mysql 
   
   #+BEGIN_SRC 
==> Caveats
We've installed your MySQL database without a root password. To secure it run:
    mysql_secure_installation

MySQL is configured to only allow connections from localhost by default

To connect run:
    mysql -uroot

To have launchd start mysql now and restart at login:
  brew services start mysql
Or, if you don't want/need a background service you can just run:
  mysql.server start
==> Summary
ğŸº  /usr/local/Cellar/mysql/8.0.15: 267 files, 234.6MB
   
   #+END_SRC

   ç¬¬ä¸€æ¬¡å®‰è£…å¥½mysqlåä¼šæç¤ºä½¿ç”¨  =mysql_secure_installation= è®¾ç½®rootå¯†ç 

   é‡ç½®rootå¯†ç è¿‡ç¨‹ä¸­é‡åˆ°ä¸€ä¸ª[[https://stackoverflow.com/questions/43846950/column-count-of-mysql-user-is-wrong-expected-42-found-44-the-table-is-probabl][error]] ä½¿ç”¨ =mysql_upgrade --force -uroot -p= å¤„ç†

   åˆ›å»ºç”¨æˆ·
   
   : CREATE USER 'manue1'@'localhost' IDENTIFIED BY 'manue1mysql'
   
   æˆæƒæ‰€æœ‰åº“
   
   : grant all privileges on *.* to 'manue1'@'localhost';
   : flush privileges;

   #+END_QUOTE
** commands
   1. ç»ˆç«¯ç™»å½•

      å¯†ç è½¬ä¹‰ç¬¦\!

      mysql -u manue1 -p qweO1\!k -h 8.8.8.8
   
   2. 


* q & a
** TODO è¿œç¨‹ä¸»æœºè®¿é—®æƒé™æ§åˆ¶å¤±æ•ˆé—®é¢˜ 
   - State "TODO"       from              [2018-11-30 Fri 15:25]
     åœ¨hiveåˆ›å»ºmetastoreè¡¨ï¼Œéœ€è¦è¿œç¨‹èŠ‚ç‚¹è®¿é—®çš„æ—¶å€™ï¼Œåˆ›å»ºhive@%è¿œç¨‹è®¿é—®æ— æ•ˆ
     : grant all privileges on hive.* to hive@'%'identified by 'manue1';
     æœ€ç»ˆåªèƒ½æ‰‹åŠ¨æ·»åŠ ä¸€æ¡hive@slave01

     æœªæ‰¾åˆ°åŸå› 
+---------+------+-------------------------------------------+
| Host    | User | Password                                  |
+---------+------+-------------------------------------------+
| %       | hive | *D6FE2F62553086F61F0C4AD1E8E096425CAB1B37 |
| slave01 | hive | *D6FE2F62553086F61F0C4AD1E8E096425CAB1B37 |
+---------+------+-------------------------------------------+
