<!DOCTYPE html>
<html lang="zh-CN">
<head>
<!-- 2019-01-24 Thu 21:14 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>mysql note</title>
<meta name="generator" content="Org mode">
<meta name="author" content="manue1">
<link rel="stylesheet" type="text/css" href="css/worg.css" />
<!-- <link rel="shortcut icon" href="http://www.langdebuqing.com/images/favicon.ico" type="image/x-icon" /> -->
</head>
<body>
<div id="preamble" class="status">
<div id="navbar">
    <ul>
        <li id="site-master"><a href="https://www.manue1.site/">Manue1's Journal</a></li>
        <li><a class="navbar-item" href="https://www.manue1.site/write.html">All Posts</a> </li>
        <li><a class="navbar-item" href="https://www.manue1.site/link.html">Links</a> </li>
        <li class="search">
            <form action="http://google.com/search" method="get" accept-charset="utf-8">
                <input type="search" id="search" name="q" autocomplete="off" maxlength="30" placeholder="Search..">
                <input type="hidden" name="q" value="site:www.manue1.com">
            </form>
        </li>
    </ul>
</div>
</div>
<div id="content">
<h1 class="title">mysql note</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org093a266">1. note-Mysql</a>
<ul>
<li><a href="#org13872f7">1.1. install mysql</a></li>
<li><a href="#orgff4fb71">1.2. commands</a></li>
</ul>
</li>
<li><a href="#org158b811">2. q &amp; a</a>
<ul>
<li><a href="#org05c025a">2.1. <span class="todo TODO">TODO</span> 远程主机访问权限控制失效问题</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org093a266" class="outline-2">
<h2 id="org093a266"><span class="section-number-2">1</span> note-Mysql</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org13872f7" class="outline-3">
<h3 id="org13872f7"><span class="section-number-3">1.1</span> install mysql</h3>
<div class="outline-text-3" id="text-1-1">
<ol class="org-ol">
<li><p>
检查系统中是否已经安装了 mysql<br>
</p>

<p>
sudo netstat -tap | grep mysql<br>
</p>

<p>
没有反应 说明没有安装<br>
</p></li>

<li><p>
安装 mysql<br>
</p>

<p>
sudo apt-get install mysql-server mysql-client<br>
</p></li>

<li><p>
测试安装<br>
</p>

<p>
sudo netstat -tap | grep mysql<br>
</p>

<p>
mysql -u root -p<br>
</p></li>

<li><p>
mysql 简单管理<br>
</p>

<p>
启动 MySQL 服务：<br>
</p>

<p>
sudo service mysql start<br>
</p>

<p>
停止 MySQL 服务：<br>
</p>

<p>
sudo stop mysql<br>
</p>

<p>
修改 MySQL 的管理员密码：<br>
</p>

<p>
sudo mysqladmin -u root password newpassword<br>
</p></li>
</ol>


<ol class="org-ol">
<li><p>
mysql 目录结构<br>
</p>

<p>
数据库存放目录：               <i>var/lib/mysql</i><br>
</p>

<p>
相关配置文件存放目录：          /usr/share/mysql<br>
</p>

<p>
相关命令存放目录：             /usr/bin(mysqladmin mysqldump 等命令)<br>
</p>

<p>
启动脚步存放目录：            <i>etc/rc.d/init.d</i><br>
</p></li>
</ol>


<ol class="org-ol">
<li>常见问题<br>

<ul class="org-ul">
<li><p>
删除不掉数据库<br>
</p>

<p>
mysql&gt; drop database elvdou;<br>
</p>
<pre class="example">
ERROR 1010 (HY000): Error dropping database (can't rmdir './elvdou', errno: 39)
</pre></li>
<li><p>
设置远程访问<br>
</p>
<p class="verse">
正常情况下,mysql占用的3306端口只是在127.0.0.1上监听，<br>
拒绝了其他IP的访问(通过netstat可以查看到)。<br>
取消本地监听需要修改 my.cnf 文件：<br>
sudo vi /etc/mysql/my.cnf<br>
bind-address = 127.0.0.1 //找到此内容并且注释<br>
</p></li>
<li><p>
mysql 大小写敏感问题<br>
</p>

<p>
sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf<br>
</p>

<p>
在[mysqld]节下 添加<br>
</p>
<pre class="example">
lower_case_table_names=1 
</pre>

<p>
备注：为 0 时大小写敏感，为 1 时大小写不敏感，默认为 0<br>
</p></li>
</ul></li>
</ol>
</div>
</div>

<div id="outline-container-orgff4fb71" class="outline-3">
<h3 id="orgff4fb71"><span class="section-number-3">1.2</span> commands</h3>
<div class="outline-text-3" id="text-1-2">
<ol class="org-ol">
<li><p>
终端登录<br>
</p>

<p>
密码转义符\!<br>
</p>

<p>
mysql -u manue1 -p qweO1\!k -h 8.8.8.8<br>
</p></li>

<li></li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org158b811" class="outline-2">
<h2 id="org158b811"><span class="section-number-2">2</span> q &amp; a</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org05c025a" class="outline-3">
<h3 id="org05c025a"><span class="section-number-3">2.1</span> <span class="todo TODO">TODO</span> 远程主机访问权限控制失效问题</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li><p>
State "TODO"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-11-30 Fri 15:25]</span></span><br>
在hive创建metastore表，需要远程节点访问的时候，创建hive@%远程访问无效<br>
</p>
<pre class="example">
grant all privileges on hive.* to hive@'%'identified by 'manue1';

</pre>
<p>
最终只能手动添加一条hive@slave01<br>
</p>

<p>
未找到原因<br>
</p></li>
</ul>
<!-- This HTML table template is generated by emacs 26.1 -->
<table border="1">
  <tr>
    <td align="left" valign="top">
      &nbsp;Host&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
    <td align="left" valign="top">
      &nbsp;User&nbsp;
    </td>
    <td align="left" valign="top">
      &nbsp;Password&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </td>
  </tr>
  <tr>
    <td align="left" valign="top">
      &nbsp;%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
      &nbsp;slave01&nbsp;
    </td>
    <td align="left" valign="top">
      &nbsp;hive&nbsp;<br />
      &nbsp;hive&nbsp;
    </td>
    <td align="left" valign="top">
      &nbsp;*D6FE2F62553086F61F0C4AD1E8E096425CAB1B37&nbsp;<br />
      &nbsp;*D6FE2F62553086F61F0C4AD1E8E096425CAB1B37&nbsp;
    </td>
  </tr>
</table>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p>
    <a href="">manue1</a> 搭建和维护，使用
    <a href="https://www.gnu.org/software/emacs/">Emacs</a>
    <a href="http://orgmode.org/">Org mode</a> 编辑和构建
</p>
<script src="http://www.langdebuqing.com/css/jquery-2.1.3.min.js"></script>
<script src="http://www.langdebuqing.com/css/main.js"></script>
</div>
</body>
</html>